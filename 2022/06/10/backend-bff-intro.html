<!DOCTYPE html>
<!--
    Type on Strap jekyll theme v2.4.0
    Theme free for personal and commercial use under the MIT license
    https://github.com/sylhare/Type-on-Strap/blob/master/LICENSE
-->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=0.5, maximum-scale=5">

    
    <!-- Theme Mode -->
    <script>
        const isAutoTheme = true;
        document.documentElement.setAttribute('data-theme', sessionStorage.getItem('theme'))
    </script>
    

    <!-- Main JS (navbar.js, katex_init.js and masonry_init.js)-->
    <script defer src="/assets/js/main.min.js"></script>

    <!-- CSS -->
    <link rel="stylesheet" href="/assets/css/main.css">

    <!-- Favicon -->
    <link rel="shortcut icon" href="/assets/favicon.png" type="image/x-icon">

    

    
    <!-- KaTeX 0.15.2 -->
    <script defer src="/assets/js/vendor/katex.min.js"></script>
    <script defer src="/assets/js/vendor/auto-render.min.js" onload="renderMathInElement(document.body);"></script>
    

    
    <!-- Mermaid 8.13.10 -->
    <script defer src="/assets/js/vendor/mermaid.min.js" onload="mermaid.initialize({startOnLoad:true});"></script>
    

    <!-- Simple Jekyll Search 1.9.1 -->
    <script src="/assets/js/vendor/simple-jekyll-search.min.js" type="text/javascript"></script>

    
    <!-- Matomo -->
    <script>
        var _paq = window._paq = window._paq || [];
        /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
        _paq.push(['trackPageView']);
        _paq.push(['enableLinkTracking']);
        (function() {
            var u="https://bedrockstreaming.matomo.cloud/";
            _paq.push(['setTrackerUrl', u+'matomo.php']);
            _paq.push(['setSiteId', '2']);
            var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
            g.async=true; g.src='//cdn.matomo.cloud/bedrockstreaming.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
        })();
    </script>
    

    <!-- Google Analytics / Cookie Consent -->
    <script>
      const cookieName = 'cookie-notice-dismissed-https://tech.bedrockstreaming.com';
      const isCookieConsent = 'false';
      const analyticsName = '';
    </script>

    
    

    <!-- SEO tags -->
    <meta property="og:image" content="https://tech.bedrockstreaming.com/images/common/banner_xl.jpg">
    
    <meta property="og:type" content="website" />
    
    <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Bedrock’s backend architecture and its front API Gateway | Bedrock Tech Blog</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="Bedrock’s backend architecture and its front API Gateway" />
<meta name="author" content="Valentin Claras" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="What is a BFF, and how does it simplify the development of frontend applications?" />
<meta property="og:description" content="What is a BFF, and how does it simplify the development of frontend applications?" />
<link rel="canonical" href="https://tech.bedrockstreaming.com/2022/06/10/backend-bff-intro.html" />
<meta property="og:url" content="https://tech.bedrockstreaming.com/2022/06/10/backend-bff-intro.html" />
<meta property="og:site_name" content="Bedrock Tech Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-06-10T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Bedrock’s backend architecture and its front API Gateway" />
<script type="application/ld+json">
{"description":"What is a BFF, and how does it simplify the development of frontend applications?","headline":"Bedrock’s backend architecture and its front API Gateway","dateModified":"2022-06-10T00:00:00+00:00","datePublished":"2022-06-10T00:00:00+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://tech.bedrockstreaming.com/2022/06/10/backend-bff-intro.html"},"url":"https://tech.bedrockstreaming.com/2022/06/10/backend-bff-intro.html","author":{"@type":"Person","name":"Valentin Claras"},"@type":"BlogPosting","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <!-- RSS -->
    <link rel="alternate" type="application/atom+xml" title="Bedrock Tech Blog" href="https://tech.bedrockstreaming.com/feed.xml"/>
    <link type="application/atom+xml" rel="alternate" href="https://tech.bedrockstreaming.com/feed.xml" title="Bedrock Tech Blog" />

    <!-- Twitter Cards -->
    <meta name="twitter:title" content="Bedrock's backend architecture and its front API Gateway">
    <meta name="twitter:description" content="What is a BFF, and how does it simplify the development of frontend applications?IntroductionAhoy there o/This article is the first in a series explaining th...">
    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:image" content="https://tech.bedrockstreaming.com/images/common/banner_xl.jpg">
    <meta name="twitter:image:alt" content="Bedrock's backend architecture and its front API Gateway">
</head>

  <body>
    <header class="site-header">

    <!-- Logo and title -->
	<div class="branding">
        
		<a href="/">
			<img alt="logo img" class="avatar" src="/images/common/br-site-logo.jpg" />
		</a>
        
        <a class="site-title" aria-label="Bedrock Tech Blog" href="/">
        Bedrock Tech Blog
		</a>
	</div>

    <!-- Toggle menu -->
    <nav class="clear">
    <a aria-label="pull" id="pull" class="toggle" href="#">
    <i class="fas fa-bars fa-lg"></i>
    </a>

    <!-- Menu -->
    <ul class="hide">
        

        
            
            
        
            
            
        
            
            <li class="separator"> | </li>
            <li>
                <a class="clear" aria-label="Jobs" title="Jobs" href="/jobs/">
                     Jobs 
                </a>
            </li>
            
            
        
            
            <li class="separator"> | </li>
            <li>
                <a class="clear" aria-label="Last Friday Talks" title="Last Friday Talks" href="/lft/">
                     Last Friday Talks 
                </a>
            </li>
            
            
        
            
            
        
            
            <li class="separator"> | </li>
            <li>
                <a class="clear" aria-label="Meetups & Conferences" title="Meetups & Conferences" href="/meetups/">
                     Meetups & Conferences 
                </a>
            </li>
            
            
        
            
            <li class="separator"> | </li>
            <li>
                <a class="clear" aria-label="OSS" title="OSS" href="/oss/">
                     OSS 
                </a>
            </li>
            
            
        
            
            
        
            
            <li class="separator"> | </li>
            <li>
                <a class="clear" aria-label="Search" title="Search" href="/search/">
                     <i class="fas fa-search" aria-hidden="true"></i>
                    
                </a>
            </li>
            
            
        
            
            <li class="separator"> | </li>
            <li>
                <a class="clear" aria-label="Tags" title="Tags" href="/tags/">
                     <i class="fas fa-tags" aria-hidden="true"></i>
                    
                </a>
            </li>
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
        
        
        <li class="separator"> | </li>
        <li><a id="theme-toggle" title="Bedrock's backend architecture and its front API Gateway " aria-label="Bedrock's backend architecture and its front API Gateway" onclick="themeToggle()"></a></li>
        
    </ul>

	</nav>
</header>

    <div class="content">
      <article class="feature-image" >
  <header id="main" style="">
    <div class="title-padder">
      
      <h1 id="Bedrock%27s+backend+architecture+and+its+front+API+Gateway" class="title">Bedrock's backend architecture and its front API Gateway</h1>
      <div class="post-info">


<span class="author">
      <img alt="Author's avatar" src="/images/avatar/v_claras.jpg" class="thumbnail">
    

    
      <span class="name">
        Valentin Claras
      </span>
    </span><span class="spacer"> - </span>



  <span class="publication-date">
    
    June 10, 2022
  </span>
</div>

      
    </div>
  </header>

  <section class="post-content">
  
      <p>What is a BFF, and how does it simplify the development of frontend applications?</p>

<h2 id="introduction">Introduction</h2>

<p>Ahoy there o/</p>

<p>This article is the first in a series explaining the backend architecture we use at Bedrock.
This first piece is dedicated to the <em>BFF</em> API. Without further delay, let’s jump into the subject!</p>

<h2 id="so-whats-a-bff">So, what’s a BFF?</h2>

<p>For years, we have been using a microservices pattern <a href="#notes">(1)</a>. Each with their own responsibilities.</p>

<p>Backend and frontend development have long been decoupled.
Every frontend applications had to know about all microservices, call them and know what to do with their data.</p>

<p><img src="/images/posts/2022-06-10-backend-bff-intro/architecture-old.png" alt="old architecture" /></p>

<p>This approach had three main limitations from a frontend point of view:</p>
<ul>
  <li>It forced Bedrock to duplicate logic in each application.</li>
  <li>It prevented us from deprecating legacy APIs.</li>
  <li>New features implied a frontend development and deployment.</li>
</ul>

<p>There were other downsides, which were mainly derivatives from those listed above.</p>
<blockquote>
  <p>As an example, updating an icon into the menu bar required us to deploy all applications. It is not always easy or doable, and cannot be forced onto users without losing some of them.</p>
</blockquote>

<p>The BFF tries to answer those limitations!</p>

<p>It’s a single API <a href="#notes">(2)</a> that handles all the frontend applications queries to display contents, navigation, or even start downloads.
In addition, this gateway <a href="#notes">(3)</a> gathers all business logic. This is done in order to avoid repeating the logic in each application.
That’s what we call a <em>Back For Front</em>!</p>

<h3 id="abstracting-the-microservices">Abstracting the microservices</h3>

<p><img src="/images/posts/2022-06-10-backend-bff-intro/architecture-new.png" alt="Our new BFF API Gateway + microservices architecture" /></p>

<p>The first main advantage is to abstract the backend complexity for the frontend teams.
In the previous model, each application had to know where each data came from, how to parse it, and what to do with it.</p>

<p>In the new model, we can easily deprecate an API, replace it, change how the data is stored or returned.
To do so, we only need the team leading the change, and the team handling the BFF to work together at their own pace.
They can decide, depending on the change, how to handle the migration.
They might decide to use a new endpoint to be switched at some point, or add a new attribute in the response, etc.</p>

<p>All those changes will happen without any frontend application noticing it.</p>

<h3 id="simplification-of-the-data-structure">Simplification of the data structure</h3>

<p>Another advantage is to simplify the data representation.</p>

<p><img src="/images/posts/2022-06-10-backend-bff-intro/presentation-old.png" alt="old presentation with multiple data structure behind" /></p>

<p>By taking all this responsibility in a single API, it now translates the data from the APIs to a single unified representation that all applications can use.</p>

<p><img src="/images/posts/2022-06-10-backend-bff-intro/presentation-new.png" alt="new presentation with a single data structure" /></p>

<p>This representation is maintained by the BFF in a single openapi schema <a href="#notes">(4)</a>. It shares the same concepts between the multiple endpoints of the API.</p>

<p>The main usage of the BFF is to handle the navigation between the pages of the application.
In the pictures above and below, the central block shows the application screen. The application page is split into two parts.</p>

<p>The top is answered by the navigation endpoint which gives a list of groups and entries.
Every entry can have nested groups, and an action.</p>

<p>The second part is what we call the <em>layout</em>. It’s a representation of the page, composed of multiple blocks, each with a list of items.
Each item has a title, a description, an image, and an action (the same type as in the entries).</p>

<p>This makes the BFF responsible for what to display in the page, and in which order and how to display it.
How to display things is described through template strings that tell how to display each block.</p>

<p>It’s important to understand that the BFF does not return HTML! It returns a JSON string that needs to be parsed and interpreted by the application.</p>

<p>Every application still has to care about its design system, what font to use, which iconography.
This means that a template <code class="language-plaintext highlighter-rouge">Card</code> might not be displayed exactly the same between a computer, a mobile phone or a television; even if the data are the same.</p>

<p><img src="/images/posts/2022-06-10-backend-bff-intro/presentation-explanation.png" alt="presentation explanation" /></p>

<p>There are other usages to the BFF <a href="#notes">(5)</a>, such as handling downloads, and some others to come, but it shares the same concept by answering to the front something to display.</p>

<h3 id="keeping-all-logic-in-one-place">Keeping all logic in one place</h3>

<p>The last main gain with the BFF, is that we’re able to put all the logic in one place.
This allows us to update and change the business rules at any time.</p>

<p>Here are a few examples</p>

<blockquote>
  <p>When a user tries to navigate the application, if he uses a new device while he has already reached the limit of allowed devices, we can display a layout asking him to delete a device first.</p>
</blockquote>

<p>This limit can be removed or changed at any time in all applications.</p>

<blockquote>
  <p>In France, explicit contents must be filtered out during daytime</p>
</blockquote>

<p>If this rule changes, we will do so directly in the BFF, and no application will ever notice it.</p>

<h2 id="conclusion">Conclusion</h2>

<p>The model known as back for front or API Gateway is nothing new and other major services already use it.
We’ve been using this model for more than 3 years now. It has undergone some major updates <a href="#notes">(6)</a> but this is a model we’re happy with.</p>

<p>We plan to expand this pattern to handle even more logic inside the BFF in the coming years and keep being frontend application’s best friend.</p>

<p><img src="/images/posts/2022-06-10-backend-bff-intro/bff.png" alt="BFF stands for Back for Front, and not Best Friends Forever here" /></p>

<p>That’s all for today’s post!</p>

<p>In the next part we will talk about handling the failures of the dependencies the BFF is calling, and what to do to always answer something usable by the applications.</p>

<h2 id="notes">Notes</h2>

<ol>
  <li>For more details about microservices, you can read <a href="https://aws.amazon.com/microservices/">this piece from AWS</a>.</li>
  <li>There are some other APIs called by our applications, such as the authentication service, but let’s not get lost into details…</li>
  <li>There’s a lot of resources about API Gateway, here is <a href="https://www.nginx.com/learn/api-gateway/">one from nginx</a>.</li>
  <li>Open API is used to define the communication standards between our BFF and the clients, more explanation on the <a href="https://www.openapis.org/">dedicated website of the organization</a>.</li>
  <li>In addition to note 1, we are currently moving to the api gateway model, and some behaviors still require the application to call dedicated microservices.</li>
  <li>( in French 🇫🇷 ) <a href="https://afup.org/talks/3241-6play-api-v2-final-1-doc">An old conference</a> from 2020 given by Benoit VIGUIER, previous Team Lead in charge of the BFF, about API gateway and asynchronous development.</li>
</ol>

<h2 id="from-the-same-series">From the same series</h2>

<ol>
  <li><a href="/2022/06/10/backend-bff-intro.html">What’s a BFF</a></li>
  <li><a href="/2022/08/12/backend-fallbacks.html">Handling API failures in a gateway</a></li>
  <li><a href="/2022/08/25/backend-errors-connections.html">What’s an error, and handling connection to multiple APIs</a></li>
  <li><a href="/2022/09/02/backend-circuit-breaker.html">Using a circuit breaker</a></li>
</ol>

<hr />
<p>In the meantime, feel free to have a look at other articles available on this blog:</p>

<ul>
  <li>🇺🇸 <a href="/2022/05/31/github-action-pr-size-labeler.html">Announcing BedrockStreaming/pr-size-labeler github action</a></li>
  <li>🇫🇷 <a href="/2022/05/30/afup-day-lille-2022.html">Retour sur l’AFUP Day Lille 2022</a></li>
</ul>

    
  </section>

  <!-- Social media shares -->
  

<div class="share-buttons">
    <ul class="share-buttons">
        <li class="meta">Share</li>
         
        <li>
            <a href="https://twitter.com/intent/tweet?text=Bedrock%27s+backend+architecture+and+its+front+API+Gateway%20https%3A%2F%2Ftech.bedrockstreaming.com%2F2022%2F06%2F10%2Fbackend-bff-intro.html"
               target="_blank" title="">
                <i class="fab fa-twitter-square fa-2x" aria-hidden="true"></i>
                <span class="sr-only">Tweet</span>
            </a>
        </li>
             
        <li>
            <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://tech.bedrockstreaming.com/2022/06/10/backend-bff-intro.html&title=Bedrock%27s+backend+architecture+and+its+front+API+Gateway%20%7C%20Bedrock+Tech+Blog&summary=&source=https://tech.bedrockstreaming.com/2022/06/10/backend-bff-intro.html"
               target="_blank" title=" LinkedIn">
                <i class="fab fa-linkedin fa-2x" aria-hidden="true"></i>
                <span class="sr-only">Share on LinkedIn</span>
            </a>
        </li>
          
        <li>
            <a href="mailto:?subject=Bedrock's backend architecture and its front API Gateway%20%7C%20Bedrock Tech Blog&body=https://tech.bedrockstreaming.com/2022/06/10/backend-bff-intro.html"
               target="_blank" title="">
                <i class="fas fa-envelope-square fa-2x" aria-hidden="true"></i>
                <span class="sr-only">Email</span></a>
        </li>
        
    </ul>
</div>




   <!-- Tag list -->
  
  


  <div class="tag-list">
    <ul>
      
        <li class="meta">Tags</li>
      

      
        <li><a class="button" href="/tags/#api">
          <p><i class="fas fa-tag fa-fw fa-sm"></i> api</p>
        </a></li>
      
        <li><a class="button" href="/tags/#api-gateway">
          <p><i class="fas fa-tag fa-fw fa-sm"></i> api-gateway</p>
        </a></li>
      
        <li><a class="button" href="/tags/#back-for-front">
          <p><i class="fas fa-tag fa-fw fa-sm"></i> back-for-front</p>
        </a></li>
      
        <li><a class="button" href="/tags/#backend">
          <p><i class="fas fa-tag fa-fw fa-sm"></i> backend</p>
        </a></li>
      
        <li><a class="button" href="/tags/#php">
          <p><i class="fas fa-tag fa-fw fa-sm"></i> php</p>
        </a></li>
      
    </ul>
  </div>



</article>

<!-- Post navigation -->

<div id="post-nav">
    
    <div id="previous-post">
        <a alt="Bedrock à la kubecon 2022, 1ere partie : performances applicatives et scalabilité" href="/2022/06/13/kubecon-2022-part-1.html">
            <p>Previous post</p>
            Bedrock à la kubecon 2022, 1ere partie : performances applicatives et scalabilité
        </a>
    </div>
    

    
    <div id="next-post">
        <a alt="Migration progressive vers Redux Toolkit" href="/2022/06/08/migration-progressive-vers-redux-toolkit.html">
            <p>Next post</p>
            Migration progressive vers Redux Toolkit
        </a>
    </div>
    
</div>



<!--Utterances-->


<!-- Cusdis -->


<!-- Disqus -->


<!-- To change color of links in the page -->
<style>
  header#main {
      background-size: cover;
      background-repeat: no-repeat;
      background-position: center;
  }

  
  .post-content a { color: rgb(255,128,0) !important; }
  .share-buttons a { color: rgb(255,128,0) !important; }
  .tag-list a:not(:hover) { color: rgb(255,128,0) !important; }
  div#post-nav a { color: rgb(255,128,0) !important; }
  footer a { color: rgb(255,128,0) !important; }
  .site-header nav a:hover {  color: rgb(255,128,0) !important; }
  a.button:hover {
    background: rgb(255,128,0) !important;
    border: 1px solid rgb(255,128,0) !important;
    color: white;
    text-decoration: none;
    filter: none;
  }
  header#main {
      background-color: rgb(255,128,0) !important;
      background-image: url('/assets/img/lineart.png');
  }
  

  
</style>

    </div>
    <footer class="site-footer">
    <p class="text">
        Powered by <a href="https://jekyllrb.com/">Jekyll</a> with <a href="https://github.com/sylhare/Type-on-Strap">Type on Strap</a>
</p>
            <div class="footer-icons">
                <ul>
                <!-- Social icons from Font Awesome, if enabled -->
                
<li>
    <a feed.xml href="/feed.xml"
       title="Follow RSS feed"
       target="_blank">
        <span class="fa-stack fa-lg">
            <i class="fas fa-circle fa-stack-2x"></i>
            <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
        </span>
    </a>
</li>



    

    

    

    

    

    

    
        
        
        
        
        <li>
            <a href="https://github.com/BedrockStreaming"
               title="Follow on Github"
               target="_blank"
               rel="noopener">
            <span class="fa-stack fa-lg">
              <i class="fas fa-circle fa-stack-2x"></i>
              <i class="fab fa-github fa-stack-1x fa-inverse"></i>
            </span>
            </a>
        </li>
    

    

    

    

    

    

    
        
        
        
        
        <li>
            <a href="https://www.linkedin.com/company/bedrock-streaming"
               title="Follow on Linkedin"
               target="_blank"
               rel="noopener">
            <span class="fa-stack fa-lg">
              <i class="fas fa-circle fa-stack-2x"></i>
              <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
            </span>
            </a>
        </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
        
        
        
        
        <li>
            <a href="https://twitter.com/Bedrock_Tech"
               title="Follow on Twitter"
               target="_blank"
               rel="noopener">
            <span class="fa-stack fa-lg">
              <i class="fas fa-circle fa-stack-2x"></i>
              <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
            </span>
            </a>
        </li>
    

    

    

    

    
        
        
        
        
        <li>
            <a href="https://www.youtube.com/channel/UCSwvTdCWHS6ulRaIqdk7lNw"
               title="Follow on Youtube"
               target="_blank"
               rel="noopener">
            <span class="fa-stack fa-lg">
              <i class="fas fa-circle fa-stack-2x"></i>
              <i class="fab fa-youtube fa-stack-1x fa-inverse"></i>
            </span>
            </a>
        </li>
    


                </ul>
            </div>
</footer>



  </body>
</html>
