---
layout: post
title: "Retour sur la Velocity New York Conf√©rence 2016"
description: "V√©locity New York 2016 - Performance, Scalabilit√©, Devops"
author:
  name: Kenny Dits et Fabien de Saint pern
  avatar:
  email:
  twitter:  techM6Web
  facebook:
  github:
category:
tags: [conference,velocity,webperf,devops]
image:
  feature: posts/velocity2016/velocity_banner.jpg
  credit: oreillyconf
  creditlink: https://www.flickr.com/photos/oreillyconf/sets/72157670842287154/
comments: true
---

Nous √©tions cette ann√©e √† New York, √† quelques blocs de Time Square, pour suivre l‚Äô√©dition New Yorkaise de la V√©locity Conf√©rence 2016.
C‚Äôest une conf√©rence que nous appr√©cions particuli√®rement et √† laquelle nous nous rendons quasiment chaque ann√©e, soit dans son √©dition europ√©enne (Berlin, Londres, Barcelone, et Amsterdam cette ann√©e en novembre), soit aux U.S. (pr√©c√©demment Santa Clara, New York cette ann√©e, et San Jos√© l‚Äôann√©e prochaine).
C‚Äôest l‚Äôoccasion de suivre une conf de tr√®s haute qualit√© avec entre 4 et 5 tracks parall√®les de conf√©rences d√©di√©es aux probl√©matiques de performances et de scalabilit√©.
On remarque que d‚Äôann√©e en ann√©e la conf√©rence s‚Äôest r√©orient√© autour du mouvement devOps, alors qu‚Äôelle √©tait pr√©c√©demment beaucoup plus centr√©e sur la webPerf (desktop et mobile).

La conf√©rence commence par l‚ÄôIgnite (sorte de mini conf√©rence dans la conf√©rence), bas√©e sur un format court (type Lightning Talk) de 5 minutes pour une pr√©sentation de 5 slides d√©filant automatiquement. On retiendra de cette premi√®re partie des conf√©rences int√©ressantes partageant les tristes chiffres de la diversit√© dans la tech aux US, mais aussi une conf√©rence tr√®s dr√¥le de [@beldhalpern](https://twitter.com/bendhalpern) de [@ThePracticalDev](https://twitter.com/ThePracticalDev) sur des parodies des livres OReilly (voir le [O RLY Cover Generator](https://dev.to/rly)) :

<blockquote class="twitter-tweet" data-lang="fr"><p lang="en" dir="ltr">Enjoying the heck out of <a href="https://twitter.com/ThePracticalDev">@ThePracticalDev</a> at Ignite <a href="https://twitter.com/hashtag/velocityconf?src=hash">#velocityconf</a>. Lololol! <a href="https://t.co/ZlJWoP4cjh">pic.twitter.com/ZlJWoP4cjh</a></p>&mdash; Bridget Kromhout (@bridgetkromhout) <a href="https://twitter.com/bridgetkromhout/status/778353731045908480">20 septembre 2016</a></blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

L‚Äôignite c‚Äôest fini sur le c√©l√®bre Ignite Karaok√© o√π 16 volontaires se sont pr√™t√©s au jeu de cet exercice hilarant mais tellement difficile, consistant √† improviser une conf√©rence sur le sujet de son choix sur 5 slides inconnues de l‚Äôorateur et qui d√©file automatiquement au bout de quelques secondes üòÉ. Ce qu‚Äôon fais aussi chez M6Web de temps en temps nomm√© [Karaok√© Slideshow](http://tech.m6web.fr/organiser-des-conferences-technique-en-interne) et que Kenny avait anim√© lors d‚Äôun Forum PHP ([voir la vid√©o](https://www.youtube.com/watch?v=Ln12meWM1pE)).

![O&#x27;Reilly Conferences sur Flickr](https://c8.staticflickr.com/9/8046/29856652295_153795f039_z.jpg)
[Cr√©dit : Flickr](https://flic.kr/p/Muk9xa)

Nous avons ensuite suivi deux jours de conf√©rences dont les th√®mes majeurs √©taient :

* Les ServiceWorkers
* Les microservices
* Le monitoring
* HTTP2
* La s√©curit√© des apps
* Les d√©tections d'anomalie
* Les ChatOps
* Le WebMobile, AMP et les PWA

# ChatOps

Un des sujets assez r√©current, notamment dans la mouvance DevOps est l‚Äôutilisation des ChatOps, sujet popularis√© par Github (via Hubot).
Cela consiste g√©n√©ralement en un bot ou une IA pos√© sur un outil de chat type Slack, Flowdock ou Hipchat, permettant de simplifier la communication entre diff√©rentes √©quipes et les diff√©rents outils (ticketing, alerting, monitoring, √©tat d‚Äôune machine, etc). Une d√©mo de l‚ÄôIA de Dynatrace √† reconnaissance vocale √† √©t√© faite, montrant comment par la voie, on pouvait recevoir dans l‚Äôoutil de Chat les infos sur les incidents de la veille, cr√©er les tickets de support etc. [Voir ici](http://dynatrace.com/meet-davis). Un peu gadget, mais rigolo.

L‚Äôun des points √† retenir, c‚Äôest que m√™me si ces outils font partie de la ¬´ culture ¬ª DevOps, ce n‚Äôest pas l‚Äôajout d‚Äôun de ces outils qui fera appara√Ætre cette culture dans votre entreprise si vous ne l‚Äôavez pas.

> Tools will not fix a broken culture

![O&#x27;Reilly Conferences sur Flickr](https://c1.staticflickr.com/9/8053/29842348056_a46d176931_z.jpg)
[Cr√©dit : Flickr](https://flic.kr/p/Mt4Qom)

# Le WebMobile, AMP, et les PWA

Plusieurs conf√©rences avaient pour but de comparer ce que l‚Äôon pouvait obtenir de nos jours via du WebMobile vs ce que l‚Äôon a sur les apps natives. Le foss√© c‚Äôest √©norm√©ment r√©tr√©ci et les WebApps ont d√©sormais acc√®s √† la plupart des fonctionnalit√©s pr√©sentes c√¥t√© natif :

* Notifications
* Ajout sur le Home Screen
* Full Screen
* Orientation
* Gestion hors ligne
* ...

C‚Äôest ce qui nous am√®ne aux Progressive Web Apps : PWA
Pete Lepage [@petele](https://twitter.com/petele) de chez Google nous a notamment pr√©sent√© des projets open-source de Google pour mettre en place diff√©rentes politiques de cache via les ¬´ serviceWorkers ¬ª (voir https://developers.google.com/web/tools/service-worker-libraries/), ainsi que les futures api : Web Payments, Credential Management ...

* Les [slides](goo.gl/0QcNQf).
* Exemple de la [PWA du Washington Post](http://wapo.com/pwa)

Toujours sur la partie mobile, Malte Ubl ([@cramforce](https://twitter.com/cramforce)), core d√©veloppeur de AMP, nous a pr√©sent√© le futur de ce protocole de google pour offrir des pages plus rapides pour la consultation de site m√©dia sur mobile.

> AMP is a web component library, validator and caching layer for reliably fast web content at scale

En commen√ßant par un bilan d‚ÄôAMP, 3000 PR + 200 contributeurs (au bout d‚Äôun an seulement !), Malte nous a expliqu√© qu‚Äôun site mobile tr√®s optimis√© pouvait logiquement √™tre plus performant qu‚ÄôAMP.

Arriveront prochainement sur AMP, le support des formulaires, des optimisations avanc√©es d‚Äôimages via le Google AMP Cache, des services Workers pour AMP pour ne jamais t√©l√©charg√© AMP dans le ¬´ chemin critique ¬ª du chargement de la page.

Un petit focus a aussi √©t√© fait sur les PWA et AMP avec `amp-install-serviceworker` qui est un service worker permettant d‚Äôinstaller la PWA apr√®s chargement de AMP, pour faire une upgrade transparente de AMP vers une PWA (Voir une d√©mo ici [choumx.github.io/amp-pwa](https://choumx.github.io/amp-pwa))

> AMP : ¬´ Start Fast, Stay Fast ¬ª

Nous avons aussi vu une conf√©rence sur l‚Äôoptimisation de la consommation des webApps en terme de CPU / temps de r√©ponses, notamment via l‚Äô√©tude des capacit√©s JS de chacun des devices/OS avec le benchmark JetStream Javascript.

On d√©couvre notamment que l‚ÄôiPhone7 a des capacit√©s assez impressionnantes, contrairement aux iPhone 5C, que le mode ¬´ √©conomie d‚Äô√©nergie ¬ª ou encore qu‚Äôapr√®s une bonne insolation, les devices sont beaucoup moins performants. D‚Äôexcellentes slides a voir ici : [hearne.me/2hot](http://hearne.me/2hot)

# WebPerf

C√¥t√© WebPerf, peu de grosses nouveaut√©s, on retiendra [@nparashuram](https://twitter.com/nparashuram) qui nous a montr√© comment automatiser le ‚Äúprofiling‚Äù des ChromeDevTools dans Node.js via ChromeDriver !

Plus d‚Äôinfos ici : [http://blog.nparashuram.com/2016/09/rise-of-web-workers-nationjs.html](http://blog.nparashuram.com/2016/09/rise-of-web-workers-nationjs.html)

Tammy Everts ([@tameverts](https://twitter.com/tameverts) de Soasta) et Pat Meenan ([@patmeenan](https://twitter.com/patmeenan?lang=fr de Google et cr√©ateur de WebPageTest)) nous ont fait un gros retour bas√© sur toutes les m√©triques r√©colt√©es par Soasta mPulse (outils de Real User Monitoring en SAAS) afin de d√©terminer des corr√©lations entre les temps de chargements et d‚Äôautres m√©triques (taux de rebond, conversion etc) gr√¢ce √† l‚Äôapplication de concept propre au Machine Learning sur une quantit√© √©norme de data. Toujours int√©ressant.

Slides ici : [http://conferences.oreilly.com/velocity/devops-web-performance-ny/public/schedule/detail/51082](http://conferences.oreilly.com/velocity/devops-web-performance-ny/public/schedule/detail/51082)

![O&#x27;Reilly Conferences sur Flickr](https://c8.staticflickr.com/9/8322/29824346471_b189d1b8ab_z.jpg)
[Cr√©dit : Flickr](https://flic.kr/p/Mrtz9c)

C√¥t√© Single Page App, le Server Side Rendering est revenu √† plusieurs reprises afin d‚Äôavoir des SPA performantes dont le premier rendu est g√©n√©r√© c√¥t√© serveur. Ce que permet nativement React, et d√©sormais Ember et Angular 2. Voir notre article sur l‚Äôisomorphisme : [http://tech.m6web.fr/isomorphic-single-page-app-parfaite-react-flux/](http://tech.m6web.fr/isomorphic-single-page-app-parfaite-react-flux/)

Cot√© HTTP, on retiendra Hooman Beheshti qui nous a fait un retour d‚Äôexp√©rience sur HTTP 2. Apr√®s une explication des nouveaut√©s du protocole (binary, single, long-lasting TCP connection, streams encapsulation, frames, bi-directional‚Ä¶), une comparaison avec HTTP 1 nous a √©t√© expos√©e. En conclusion, HTTP2 est complexe et migrer n‚Äôest pas juste modifier un param√®tre. Bien que cette nouvelle version est l√©g√®rement plus rapide, en particulier sur un r√©seau lent (<1Mbps), le protocole supporte tr√®s mal les pertes de paquets ou les fortes congestions √† cause de l‚Äôunique connexion (TCP slow start). La recommandation est de tester sur chaque site et d‚Äôoptimiser ses pages selon la version d‚ÄôHTTP utilis√©e. Une piste serait HTTP2 over UDP.

Les [slides](http://www.slideshare.net/Fastly/http2-what-no-one-is-telling-you)

# DevOps

De nombreuses conf√©rences avaient pour objectifs d‚Äôaborder le bienfaits du DevOps et plus largement les bonnes pratiques li√©es au mouvement afin de gagner en qualit√© et fiabilit√©.

On retiendra notamment la conf√©rence de Cornelia Davis (DevOps: Who does what?) explicitant les diff√©rents r√¥les dans un SDLC (software development life-cycle) et leur r√©partition en √©quipes dans l‚Äôorganisation.

## Les r√¥les dans le SDLC :

* **Architecte** : Ent Archi, Biz Analyst, Portfolio Mgmt
* **SCO** : Info sec
* **Infra** : Srv Build, Cap Plan, Network, Ops
* **Middleware/AppDev** : Middleware Eng, SW Arch, SW Dev, Client SW Dev, Svc Govern
* **Data** : Data Arch, DBA
* **Biz** : Prod Mgmt
* **Ent Apps** : DCTM Eng.

## La r√©partition en √©quipes propos√©e :

**Platform** (unique / transverse) :

* **Middleware/AppDev** : Middleware Eng, Svc Govern
* **Infra** : Srv Build, Cap Plan, Network, Ops
* **SCO** : Info sec
* **Data** : DBA

**Customer Facing App** (de 1 √† n √©quipes)

* **Middleware/AppDev** : SW Arch, SW Dev, Client SW Dev
* **Data** : Data Arch
* **Infra** : Cap Plan, Ops
* **Biz** : Prod Mgmt
* **Architecte** : Biz Analyst

**Enablement** (unique / transverse) :

* **Architecte** : Ent Archi, Portfolio Mgmt

On notera notamment la pr√©sence d‚ÄôOps dans les √©quipes Customer Facing App et inversement de Middleware Eng dans l‚Äô√©quipe Platform.

De m√™me, la pr√©sence d‚Äôarchitectes transverses (enablement) permet de garder une architecture coh√©rente. (Pas de slides disponibles pour cette conf√©rence)

![O&#x27;Reilly Conferences sur Flickr](https://c8.staticflickr.com/9/8242/29281257423_6e74baae8e_z.jpg)
[Cr√©dit : Flickr](https://flic.kr/p/LBu6FV)

# Microservices

La conf√©rence de [@susanthesquark](https://twitter.com/susanthesquark), ax√©e sur les microservices, rappelait quelques bonnes pratiques :
* Architecture sans SPOF
* Ne pas laisser s‚Äôaccumuler sa dette technique
* D√©ploiement continu
* Travail en √©quipes entre Dev / PM / SRE
* Monitoring
* Proc√©dures standards de gestion des incidents
* Post-mortem pour apprendre des ses erreurs‚Ä¶

Les [slides](http://cdn.oreillystatic.com/en/assets/1/event/159/Mitigating%20sprawl%20with%20microservices%20and%20containerization%20Presentation.pdf)

Concernant le monitoring des microservices, la conf√©rence de Reshmi Krishna [@reshmi9k](https://twitter.com/reshmi9k) s‚Äôint√©ressait √† l‚Äôanalyse de la latence, inh√©rente √† ce type d‚Äôarchitecture. La principale technique propos√©e est celle du suivi d‚Äôune requ√™te de bout en bout, gr√¢ce notamment √† l‚Äôoutil Zipkin. De m√™me, une gestion des timeouts globale (pour chaque requ√™te pour tous les microservices) et dynamique (selon le contexte) permet de ma√Ætriser les probl√®mes en cas de ralentissement d‚Äôun service en particulier.

Les [slides](http://cdn.oreillystatic.com/en/assets/1/event/159/Distributed%20tracing_%20How%20to%20do%20latency%20analysis%20for%20microservices-based%20applications%20Presentation.ppt)

# S√©curit√©

Concernant la s√©curit√©, la conf√©rence de Kelly Lum [@aloria](https://twitter.com/aloria), passait en revu le minimun vital  :
* La s√©curit√© doit √™tre pens√©e d√®s la conception
* Permettre aux utilisateurs de reporter facilement des probl√®mes s√©curit√©s et √™tre √† l‚Äô√©coute des r√©seaux sociaux
* Toujours remercier les utilisateurs signalant les failles
* Avoir une √©quipe testant r√©guli√®rement la s√©curit√© (Crack Team).
* En cas de failles de s√©curit√©, apr√®s correction, toujours analyser les causes et apprendre de ses erreurs.

Les [slides](http://cdn.oreillystatic.com/en/assets/1/event/159/Security%20at%20the%20speed%20of%20innovation_%20Defensive%20development%20for%20a%20fast-paced%20world%20Presentation.pdf)

# Conclusion

Vous pouvez retrouver la plupart des slides [ici](http://conferences.oreilly.com/velocity/devops-web-performance-ny/public/schedule/speakers).
et voir les vid√©os de certaines des conf√©rences [ici](https://www.youtube.com/playlist?list=PL055Epbe6d5Zl1yShG26D2r2TzwDDoDfK)
ou [ici](https://www.oreilly.com/ideas/keynotes-from-velocity-new-york-2016)

Les photos officielles de la conf sont [ici](https://www.flickr.com/photos/oreillyconf/albums/72157670842287154)
