---
layout: post
title: "Retour sur la Velocity NYC 2016"
description: ""
author:
  name: Kenny Dits et Fabien de Saint pern
  avatar:
  email:
  twitter:  techM6Web
  facebook:
  github:
category:
tags: [conference,velocity,webperf]
image:
  feature: posts/velocity2016/velocity_banner.jpg
  credit: oreillyconf
  creditlink: https://www.flickr.com/photos/oreillyconf/sets/72157670842287154/
comments: true
permalink: velocity-nyc-2016.html
---

Nous Ã©tions cette annÃ©e Ã  New York, Ã  quelques blocs de Time Square, pour suivre lâ€™Ã©dition New Yorkaise de la VÃ©locity ConfÃ©rence 2016.
Câ€™est une confÃ©rence que nous apprÃ©cions particuliÃ¨rement et Ã  laquelle nous nous rendons quasiment chaque annÃ©e, soit dans son Ã©dition europÃ©enne (Berlin, Londres, Barcelone, et Amsterdam cette annÃ©e en novembre), soit aux U.S. (prÃ©cÃ©demment Santa Clara, New York cette annÃ©e, et San JosÃ© lâ€™annÃ©e prochaine).
Câ€™est lâ€™occasion de suivre une conf de trÃ¨s haute qualitÃ© avec entre 4 et 5 tracks parallÃ¨les de confÃ©rences dÃ©diÃ©es aux problÃ©matiques de performances et de scalabilitÃ©.
On remarque que dâ€™annÃ©e en annÃ©e la confÃ©rence sâ€™est rÃ©orientÃ© autour du mouvement devOps, alors quâ€™elle Ã©tait prÃ©cÃ©demment beaucoup plus centrÃ©e sur la webPerf (desktop et mobile).

La confÃ©rence commence par lâ€™Ignite (sorte de mini confÃ©rence dans la confÃ©rence), basÃ©e sur un format court (type Lightning Talk) de 5 minutes pour une prÃ©sentation de 5 slides dÃ©filant automatiquement. On retiendra de cette premiÃ¨re partie des confÃ©rences intÃ©ressantes partageant les tristes chiffres de la diversitÃ© dans la tech aux US, mais aussi une confÃ©rence trÃ¨s drÃ´le de [@beldhalpern](https://twitter.com/bendhalpern) de @ThePracticalDev sur des parodies des livres Oreilly (qui deviennent Oâ€™Rly ?) :

* https://twitter.com/ThePracticalDev/status/778685701558710273
* https://twitter.com/bridgetkromhout/status/778353731045908480

Cadeau : [O RLY Cover Generator](https://dev.to/rly)

Lâ€™ignite câ€™est fini sur le cÃ©lÃ¨bre Ignite KaraokÃ© oÃ¹ 16 volontaires se sont prÃªtÃ©s au jeu de cet exercice hilarant mais tellement difficile, consistant Ã  improviser une confÃ©rence sur le sujet de son choix sur 5 slides inconnues de lâ€™orateur et qui dÃ©file automatiquement au bout de quelques secondes ğŸ˜ƒ. Ce quâ€™on fais aussi chez M6Web de temps en temps nommÃ© [KaraokÃ© Slideshow](http://tech.m6web.fr/organiser-des-conferences-technique-en-interne) et que Kenny avait animÃ© lors dâ€™un Forum PHP ([voir la vidÃ©o](https://www.youtube.com/watch?v=Ln12meWM1pE)).

Nous avons ensuite suivi deux jours de confÃ©rences dont les thÃ¨mes majeurs Ã©taient :
* Les ServiceWorkers
* Les microservices 
* Le monitoring
* HTTP2
* La sÃ©curitÃ© des apps
* Les dÃ©tections d'anomalie
* Les ChatOps
* Le WebMobile, AMP et les PWA

# ChatOps

Un des sujets assez rÃ©current, notamment dans la mouvance DevOps est lâ€™utilisation des ChatOps, sujet popularisÃ© par Github (via Hubot).
Cela consiste gÃ©nÃ©ralement en un bot ou une IA posÃ© sur un outil de chat type Slack, Flowdock ou Hipchat, permettant de simplifier la communication entre diffÃ©rentes Ã©quipes et les diffÃ©rents outils (ticketing, alerting, monitoring, Ã©tat dâ€™une machine, etc). Une dÃ©mo de lâ€™IA de Dynatrace Ã  reconnaissance vocale Ã  Ã©tÃ© faite, montrant comment par la voie, on pouvait recevoir dans lâ€™outil de Chat les infos sur les incidents de la veille, crÃ©er les tickets de support etc. [Voir ici](http://dynatrace.com/meet-davis). Un peu gadget, mais rigolo.
Lâ€™un des points Ã  retenir, câ€™est que mÃªme si ces outils font partie de la Â« culture Â» DevOps, ce nâ€™est pas lâ€™ajout dâ€™un de ces outils qui fera apparaÃ®tre cette culture dans votre entreprise si vous ne lâ€™avez pas.

> Tools will not fix a broken culture

# Le WebMobile, AMP, et les PWA

Plusieurs confÃ©rences avaient pour but de comparer ce que lâ€™on pouvait obtenir de nos jours via du WebMobile vs ce que lâ€™on a sur les apps natives. Le fossÃ© câ€™est Ã©normÃ©ment rÃ©trÃ©ci et les WebApps ont dÃ©sormais accÃ¨s Ã  la plupart des fonctionnalitÃ©s prÃ©sentes cÃ´tÃ© natif :
* Notifications
* Ajout sur le Home Screen
* Full Screen
* Orientation
* Gestion hors ligne
...

Câ€™est ce qui nous amÃ¨ne aux Progressive Web Apps : PWA
Pete Lepage @petele de chez Google nous a notamment prÃ©sentÃ© des projets open-source de Google pour mettre en place diffÃ©rentes politiques de cache via les Â« serviceWorkers Â» (voir https://developers.google.com/web/tools/service-worker-libraries/), ainsi que les futures api : Web Payments, Credential Management ...
Les [slides](goo.gl/0QcNQf).
Exemple de la [PWA du Washington Post](http://wapo.com/pwa)

Toujours sur la partie mobile, Malte Ubl (@cramforce), core dev de AMP, nous a prÃ©sentÃ© le futur de ce protocole de google pour offrir des pages plus rapides pour la consultation de site mÃ©dia sur mobile.

> AMP is a web component library, validator and caching layer for reliably fast web content at scale

En commenÃ§ant par un bilan dâ€™AMP, 3000 PR + 200 contributeurs (au bout dâ€™un an seulement !), Malte nous a expliquÃ© quâ€™un site mobile trÃ¨s optimisÃ© pouvait logiquement Ãªtre plus performant quâ€™AMP.
Arriveront prochainement sur AMP, le support des formulaires, des optimisations avancÃ©es dâ€™images via le Google AMP Cache, des services Workers pour AMP pour ne jamais tÃ©lÃ©chargÃ© AMP dans le Â« chemin critique Â» du chargement de la page.
Un petit focus a aussi Ã©tÃ© fait sur les PWA et AMP avec Â« amp-install-serviceworker Â» qui est un service worker permettant dâ€™installer la PWA aprÃ¨s chargement de AMP, pour faire une upgrade transparente de AMP vers une PWA (Voir une dÃ©mo ici choumx.github.io/amp-pwa)

> AMP : Â« Start Fast, Stay Fast Â» 

Nous avons aussi vu une confÃ©rence sur lâ€™optimisation de la consommation des webApps en terme de CPU / temps de rÃ©ponses, notamment via lâ€™Ã©tude des capacitÃ©s JS de chacun des devices/OS avec le benchmark JetStream Javascript.
On dÃ©couvre notamment que lâ€™iPhone7 a des capacitÃ©s assez impressionnantes, contrairement aux iPhone 5C, que le mode Â« Ã©conomie dâ€™Ã©nergie Â» ou encore quâ€™aprÃ¨s une bonne insolation, les devices sont beaucoup moins performants. Dâ€™excellentes slides a voir ici : hearne.me/2hot 

# WebPerf

CÃ´tÃ© WebPerf, peu de grosses nouveautÃ©s, on retiendra @nparashuram qui nous a montrÃ© comment automatiser le â€œprofilingâ€ des ChromeDevTools dans Node.js via ChromeDriver !
Plus dâ€™infos ici : http://blog.nparashuram.com/2016/09/rise-of-web-workers-nationjs.html

Tammy Everts ([@tameverts](https://twitter.com/tameverts) de Soasta) et Pat Meenan ([@patmeenan](https://twitter.com/patmeenan?lang=fr de Google et crÃ©ateur de WebPageTest)) nous ont fait un gros retour basÃ© sur toutes les mÃ©triques rÃ©coltÃ©es par Soasta mPulse (outils de Real User Monitoring en SAAS) afin de dÃ©terminer des corrÃ©lations entre les temps de chargements et dâ€™autres mÃ©triques (taux de rebond, conversion etc) grÃ¢ce Ã  lâ€™application de concept propre au Machine Learning sur une quantitÃ© Ã©norme de data. Toujours intÃ©ressant. Slides ici : http://conferences.oreilly.com/velocity/devops-web-performance-ny/public/schedule/detail/51082

CÃ´tÃ© Single Page App, le Server Side Rendering est revenu Ã  plusieurs reprises afin dâ€™avoir des SPA performantes dont le premier rendu est gÃ©nÃ©rÃ© cÃ´tÃ© serveur. Ce que permet nativement React, et dÃ©sormais Ember et Angular 2. Voir notre article sur lâ€™isomorphisme http://tech.m6web.fr/isomorphic-single-page-app-parfaite-react-flux/

CotÃ© HTTP, on retiendra Hooman Beheshti qui nous a fait un retour dâ€™expÃ©rience sur HTTP 2. AprÃ¨s une explication des nouveautÃ©s du protocole (binary, single, long-lasting TCP connection, streams encapsulation, frames, bi-directionalâ€¦), une comparaison avec HTTP 1 nous a Ã©tÃ© exposÃ©e. En conclusion, HTTP2 est complexe et migrer nâ€™est pas juste modifier un paramÃ¨tre. Bien que cette nouvelle version est lÃ©gÃ¨rement plus rapide, en particulier sur un rÃ©seau lent (<1Mbps), le protocole supporte trÃ¨s mal les pertes de paquets ou les fortes congestions Ã  cause de lâ€™unique connexion (TCP slow start). La recommandation est de tester sur chaque site et dâ€™optimiser ses pages selon la version dâ€™HTTP utilisÃ©e. Une piste serait HTTP2 over UDP.
Les [slides](http://www.slideshare.net/Fastly/http2-what-no-one-is-telling-you)

# DevOps

De nombreuses confÃ©rences avaient pour objectifs dâ€™aborder le bienfaits du DevOps et plus largement les bonnes pratiques liÃ©es au mouvement afin de gagner en qualitÃ© et fiabilitÃ©.

On retiendra notamment la confÃ©rence de Cornelia Davis (DevOps: Who does what?) explicitant les diffÃ©rents rÃ´les dans un SDLC (software development life-cycle) et leur rÃ©partition en Ã©quipes dans lâ€™organisation.

## Les rÃ´les dans le SDLC :

* **Architecte** : Ent Archi, Biz Analyst, Portfolio Mgmt
* **SCO** : Info sec
* **Infra** : Srv Build, Cap Plan, Network, Ops
* **Middleware/AppDev** : Middleware Eng, SW Arch, SW Dev, Client SW Dev, Svc Govern
* **Data** : Data Arch, DBA
* **Biz** : Prod Mgmt
* **Ent Apps** : DCTM Eng.

## La rÃ©partition en Ã©quipes proposÃ©e :

**Platform** (unique / transverse) :
* **Middleware/AppDev** : Middleware Eng, Svc Govern
* **Infra** : Srv Build, Cap Plan, Network, Ops
* **SCO** : Info sec
* **Data** : DBA

**Customer Facing App** (de 1 Ã  n Ã©quipes)
* **Middleware/AppDev** : SW Arch, SW Dev, Client SW Dev
* **Data** : Data Arch
* **Infra** : Cap Plan, Ops
* **Biz** : Prod Mgmt
* **Architecte** : Biz Analyst

**Enablement** (unique / transverse) :
* **Architecte** : Ent Archi, Portfolio Mgmt

On notera notamment la prÃ©sence dâ€™Ops dans les Ã©quipes Customer Facing App et inversement de Middleware Eng dans lâ€™Ã©quipe Platform.

De mÃªme, la prÃ©sence dâ€™architectes transverses (enablement) permet de garder une architecture cohÃ©rente. (Pas de slides disponibles pour cette confÃ©rence)

# Microservices

La confÃ©rence de [@susanthesquark](https://twitter.com/susanthesquark), axÃ©e sur les microservices, rappelait quelques bonnes pratiques :
* Architecture sans SPOF
* Ne pas laisser sâ€™accumuler sa dette technique
* DÃ©ploiement continu
* Travail en Ã©quipes entre Dev / PM / SRE
* Monitoring
* ProcÃ©dures standards de gestion des incidents
* Post-mortem pour apprendre des ses erreursâ€¦

Les [slides](http://cdn.oreillystatic.com/en/assets/1/event/159/Mitigating%20sprawl%20with%20microservices%20and%20containerization%20Presentation.pdf)

Concernant le monitoring des microservices, la confÃ©rence de Reshmi Krishna [@reshmi9k](https://twitter.com/reshmi9k) sâ€™intÃ©ressait Ã  lâ€™analyse de la latence, inhÃ©rente Ã  ce type dâ€™architecture. La principale technique proposÃ©e est celle du suivi dâ€™une requÃªte de bout en bout, grÃ¢ce notamment Ã  lâ€™outil Zipkin. De mÃªme, une gestion des timeouts globale (pour chaque requÃªte pour tous les microservices) et dynamique (selon le contexte) permet de maÃ®triser les problÃ¨mes en cas de ralentissement dâ€™un service en particulier.
Les [slides](http://cdn.oreillystatic.com/en/assets/1/event/159/Distributed%20tracing_%20How%20to%20do%20latency%20analysis%20for%20microservices-based%20applications%20Presentation.ppt)

# SÃ©curitÃ©

Concernant la sÃ©curitÃ©, la confÃ©rence de Kelly Lum [@aloria](https://twitter.com/aloria), passait en revu le minimun vital  :
* La sÃ©curitÃ© doit Ãªtre pensÃ©e dÃ¨s la conception
* Permettre aux utilisateurs de reporter facilement des problÃ¨mes sÃ©curitÃ©s et Ãªtre Ã  lâ€™Ã©coute des rÃ©seaux sociaux
* Toujours remercier les utilisateurs signalant les failles
* Avoir une Ã©quipe testant rÃ©guliÃ¨rement la sÃ©curitÃ© (Crack Team).
* En cas de failles de sÃ©curitÃ©, aprÃ¨s correction, toujours analyser les causes et apprendre de ses erreurs.

Les [slides](http://cdn.oreillystatic.com/en/assets/1/event/159/Security%20at%20the%20speed%20of%20innovation_%20Defensive%20development%20for%20a%20fast-paced%20world%20Presentation.pdf)

# Conclusion

Vous pouvez retrouver la plupart des slides [ici](http://conferences.oreilly.com/velocity/devops-web-performance-ny/public/schedule/speakers).
et voir les vidÃ©os de certaines des confÃ©rences [ici](https://www.youtube.com/playlist?list=PL055Epbe6d5Zl1yShG26D2r2TzwDDoDfK)
ou [ici](https://www.oreilly.com/ideas/keynotes-from-velocity-new-york-2016)

Les photos officielles de la conf sont [ici](https://www.flickr.com/photos/oreillyconf/albums/72157670842287154)

