---
layout: post
title: Bedrock aux API Days Paris (2023)
description: Nous √©tions aux API Days √† Paris pour l'√©dition 2023 !
author: [g_bouyge, j_hardeman, k_phan, n_alscher, o_thebault, o_weber, t_geindre]
tags: [conference, paris, tech, api, eda]
color: rgb(251,87,66)
thumbnail: "/images/posts/api-days-paris-2023/welcome-to-api-days-paris.png"
permalink: api-days-paris-2023
---

Cette ann√©e Bedrock a envoy√© 7 de ses collaborateurs et collaboratrices (i.e. nous, les auteurs de cet article) √† l'√©dition 2023 des conf√©rences "API Days" √† Paris.

L'√©v√©nement a eu lieu au CNIT √† La D√©fense (juste en face du march√© de No√´l) et a dur√© 3 jours, du Mercredi 06/12/23 au Vendredi 08/12/23.

![La D√©fense √† Paris](/images/posts/api-days-paris-2023/la-defense.png)

En plus des 11 paires de chaussettes diff√©rentes üß¶ que nous avons r√©ussi √† d√©busquer en parlant aux diff√©rents partenaires sur place... En tout, [ce sont plus de 100 talks, r√©partis dans 9 salles, qui nous ont √©t√© pr√©sent√©s](https://www.apidays.global/paris/#schedule).

Voici, un r√©sum√© de quelques-uns des talks que nous souhaitions mentionner sur ce blog üëá

## Making the Most of Your OpenAPI Spec

> Conf√©rence pr√©sent√©e par Alexander Broadbent (Principal Engineer - SAPI)

Cette conf√©rence expliquait, en d√©tail, une technique "design-first" permettant d'√©radiquer les erreurs de "d√©synchronisation" entre la documentation d'une API et son comportement r√©el, tout en g√©n√©rant une partie du code.

![What we are doing](/images/posts/api-days-paris-2023/what-we-are-doing.png)

![How we are winning](/images/posts/api-days-paris-2023/how-we-are-winning.png)

Cette technique peut se r√©sumer en quelques points : 
- la documentation OpenAPI est la source de v√©rit√© et d√©crit l'int√©gralit√© des endpoints de l'application (celle-ci peut √™tre fragment√©e en plusieurs fichiers)
- un outil ([redocly](https://github.com/Redocly/redoc)) regroupe tous les documents OpenAPI dans un m√™me fichier
- un outil ([openapi-typescript](https://github.com/drwpow/openapi-typescript)) g√©n√®re le typage Typescript correspondant au fichier OpenAPI
- un outil ([fastify-openapi-glue](https://github.com/seriousme/fastify-openapi-glue)) applique le typage Typescript g√©n√©r√© sur le code des diff√©rents endpoints de l'API [Fastify](https://fastify.dev/) afin de s'assurer que le code produit par les d√©veloppeurs est conforme √† la documentation

Et pour les d√©tails d'impl√©mentation, le repository GitHub de la d√©mo d'Alexander est disponible ici : https://github.com/AlexBroadbent/openapi-demo 

## Forget TypeScript, Choose Rust to build Robust, Fast and Cheap APIs

> Conf√©rence pr√©sent√©e par Zacaria Chtatar (Backend Software Engineer - HaveSomeCode)

Cette conf√©rence au titre subversif expliquait pourquoi Zacaria, d√©veloppeur Typescript/NodeJS √† ClubMed, en est arriv√© √† s'int√©resser tr√®s fortement au langage de programmation Rust‚Ä¶ Au point d'en faire la promotion, en anglais (respect), aux API Days.

La premi√®re partie de sa conf√©rence parlait du langage de programmation Typescript, en dressant une liste de ses qualit√©s (fullstack, tr√®s largement d√©ploy√© en entreprise, √©cosyst√®me riche, ...) et de ses d√©fauts (gestion d'erreur optionnelle, typage √©ph√©m√®re, runtime principal peu performant, ‚Ä¶). Cette premi√®re partie s'est achev√©e par un message clair : "Typescript is not enough".

![Typescript is not enough](/images/posts/api-days-paris-2023/typescript-is-not-enough.png)

La suite et fin de la pr√©sentation, quant √† elle, √©tait une introduction √† Rust. 

![Introducing Rust](/images/posts/api-days-paris-2023/introducing-rust.png)

Bien que nous √©tions surpris de voir que [le langage de programmation pr√©f√©r√© des d√©veloppeurs](https://survey.stackoverflow.co/2023/#section-admired-and-desired-programming-scripting-and-markup-languages) de ces 8 derni√®res ann√©es, et sur lequel [les plus grosses entreprises tech du monde misent aujourd'hui](https://foundation.rust-lang.org/members/), avait encore besoin d'√™tre mis en avant en 2023... Zacaria a effectivement eu raison d'en remettre une couche, car encore trop peu d'entreprises fran√ßaises ont pris conscience des avantages qu'offre Rust.

Cependant, cette 2√®me partie de conf√©rence avait un go√ªt de d√©j√† vu pour nous car un de nos collaborateurs a d√©j√† donn√© le m√™me genre de conf√©rence √† Bedrock durant [nos LFT](https://tech.bedrockstreaming.com/lft/) 2 ann√©es auparavant (en partant de PHP plut√¥t que de Typescript)... Ceci √©tant, gr√¢ce √† nos 2 ans d'exp√©rience de Rust en production et pour les raisons √©voqu√©es par Zacaria durant son talk, Bedrock est en mesure de t√©moigner sa satisfaction d'avoir pris le temps de r√©√©crire certaines des API les plus critiques de Bedrock en Rust. Et nous esp√©rons que de nombreuses entreprises oseront suivre notre exemple, afin de permettre aux d√©veloppeurs soucieux de la qualit√© de leur travail comme Zacaria, de disposer de ce merveilleux langage de programmation.

Et si vous ne comprenez toujours pas l'int√©r√™t de Rust, [le talk de Zacaria est disponible en replay sur Youtube](https://www.youtube.com/watch?v=eSo3e3ugn5g).

## Real-Life REST API Versioning: Strategies and Best Practices

> Conf√©rence pr√©sent√©e par Alexandre Touret (Senior Software Architect - Worldline)

La gestion des versions dans le contexte des API au sein d'une entreprise peut souvent s'av√©rer √™tre un d√©fi complexe et d√©licat. En effet, les interfaces de programmation applicative (API) constituent le c≈ìur des interactions entre diff√©rents services et applications au sein d'un √©cosyst√®me num√©rique. La n√©cessit√© de versionner ces API devient imp√©rative pour garantir une √©volution harmonieuse tout en pr√©servant la compatibilit√© avec les syst√®mes existants.

Worldline fait partie des entreprises avec une architecture technique complexe, exposant √† des clients finaux un mod√®le m√©tier en constante √©volution.
Ce probl√®me fait tr√®s fortement √©cho avec le business model de Bedrock.

Dans sa conf√©rence, Alexandre a pr√©sent√© son retour d'exp√©rience sur comment versionner une API. Et comment l'exercice est loin d'√™tre un long fleuve tranquille. Voici les points cl√©s que nous avons retenus : 

#### Toutes les APIs ne n√©cessitent pas d'√™tre versionn√©es

Le versioning c'est compliqu√©. C'est un fait. Autant l'appliquer sur des APIs o√π ce principe est vraiment utile. Il est effectivement peut-√™tre moins utile de versionner une API interne, non expos√©e sur internet ou avec un p√©rim√®tre fonctionnel tr√®s limit√© ou stable.
Voici les questions propos√©es par Alexandre qui peuvent nous aider dans notre d√©cision : ai-je besoin de versionner ? Combien de versions dois-je g√©rer en parall√®le ? Est-ce que ma plateforme est compatible ? Quels sont les impacts sur ma configuration, mon mod√®le de donn√©es, **mon syst√®me d'authentification** (Alexandre a bien insist√© sur ce point. Il ne faut pas n√©gliger l'authentification dans la probl√©matique du versioning) ?

#### Le versioning s'applique aussi sur une architecture en micro service

On a tendance √† croire que seules "les grosses API" sont concern√©es par le versioning mais Alexandre nous a montr√© qu'il n'en est rien. Un micro service, aussi micro (voir macro) qu'il soit, g√®re √† lui tout seul un p√©rim√®tre fonctionnel. Il est donc l√©gitime qu'il puisse √©voluer au fil des versions.

#### Comment g√©rer le versioning

Plusieurs solutions, directement dans l'URL, via header (plus facile avec une API existante)
Alexandre a fortement d√©conseill√© d'utiliser le versioning par content type. √Ä la fois peu lisible et difficilement maintenable.

![Comment g√©rer le versionning](/images/posts/api-days-paris-2023/api-versioning.png)

#### L'impact du versioning

Versionner une API change en profondeur nos mani√®res de travailler. Et ce √† plusieurs niveaux :
- Le code source, la technique. Il est ind√©niable que le code source ainsi que l'architecture technique de vos projets s'en verra impact√©s. L'impact ne s'arr√™te pas au code en lui-m√™me, mais sur tout ce qui gravite autour. Nos bases de donn√©es, nos scripts, nos configurations serveur ou nos images docker par exemple
- Le produit. Nos API exposent le m√©tier de notre produit. L'impact n'est donc pas que technique, mais aussi fonctionnel / produit. Une √©volution de version technique entraine des breaking change et inversement. Il est donc tr√®s important, les √©quipes et produit travaillent de pair pour √©voluer ensemble
- La livraison. Avoir plusieurs versions d'un API complexifie la mise en production de cette derni√®re. Il faudra tr√®s certainement revoir nos pipelines d'int√©gration et de d√©ploiement. Ce point est, lui aussi, √† ne pas n√©gliger et n√©cessitera un travail commun au sein des √©quipes techniques

#### L'observabilit√©

Alexandre nous a aussi parl√© de l'importance d'avoir de la visibilit√© sur ce qu'il se passe en production, et tout particuli√®rement √† la maille des diff√©rentes versions de nos API.

L'observabilit√© est quelque chose de plus en plus r√©pandu dans notre m√©tier. Mais le versioning porte le concept encore un cran au-dessus.

Il est primordial d'√™tre capable d'assurer une bonne observabilit√© de nos APIs √† la maille : 
- De la version
- Des clients (via des API Keys d√©di√©es)

Une bonne observabilit√© est la cl√© pour d√©finir une bonne strat√©gie et √™tre capable d'anticiper le d√© commissionnement de versions obsol√®tes. Ce point est selon moi tr√®s important.

Il est tr√®s (tr√®s) compliqu√© de maintenir un nombre trop √©lev√© de versions pour une m√™me API. Sans parler d'obsolescence programm√©e, il faut trouver le bon niveau de maintenance pour √©viter de tomber dans le pi√®ge de la dette technique. Pas facile comme sujet !

Pour finir, je tiens √† remercier Alexandre pour sa conf√©rence vraiment int√©ressante. Bourr√©e d'exemples concrets. J'ai vraiment senti une vraie ma√Ætrise du sujet. Bravo ! Cette conf√©rence est mon coup de c≈ìur de l'API Days Paris 2023.

## Our Ongoing Journey From REST To GraphQL On Android

> Conf√©rence pr√©sent√©e par Julien Salvi (Lead Android Engineer - Aircall)

Durant cette pr√©sentation, Julien Salvi, Lead Android Engineer chez Aircall nous fait un retour d'exp√©rience sur la migration de l'√©quipe Android d'une API REST √† une API GraphQL. Ce choix a √©t√© motiv√© par plusieurs raisons : 
- Une probl√©matique globale sur le scaling de leur API REST
- L'efficacit√© et l'agr√©gation des donn√©es des API GraphQL
- La recherche d'une alternative Serverless
- L'objectif de limiter les perturbations pour les clients

Leur aventure d√©bute mi 2020 et est toujours en cours.

![GraphQL API journey](/images/posts/api-days-paris-2023/graphql-api-journey.png)

Pour r√©pondre √† ces demandes, les √©quipes ont dirig√© leur choix vers GraphQL pour cr√©er leur nouvelles API, qui a plusieurs avantages selon Julien notamment: 
- La possibilit√© pour les clients de r√©cup√©rer seulement les donn√©es dont ils ont besoin, cela √©vite l'over-fetching et l'under-fetching
- Les clients peuvent r√©cup√©rer de multiples ressources dans une seule requ√™te
- GraphQL propose un moyen d'√©tablir une connection constante entre le client et le serveur, ce qui augmente la scalabilit√© en temps r√©el
- Le fort typage de GraphQL permet une communication claire, r√©duisant ainsi les erreurs
- L'am√©lioration de la performance globale gr√¢ce au batching des requ√™tes 

L'√©quipe Android utilise le service [AppSync d'AWS](https://aws.amazon.com/fr/appsync/), facilitant le filtrage, permetttant de faire du realtime, assurer une scalabilit√© et une bonne int√©gration avec ElasticSearch et DynamoDB.

Apr√®s les premi√®res migrations vers les API GraphQL, le conf√©rencier insiste sur l'importance du monitoring, qui chez eux est pr√©sent que ce soit pour les queries ou les mutations.

Voici les points √† retenir de leur exp√©rience

![Key takeaways](/images/posts/api-days-paris-2023/key-takeaways.png)

Pour finir, revenons sur un de leur point √† surveiller, Julien nous √©voque l'importance de la collaboration entre les √©quipes front et backend qui est √©galement selon nous tr√®s importante, notamment pour optimiser l'efficacit√© des API. On peut citer comme actions par exemple, se mettre d'accord sur les meilleurs timeout √† adopter sur les API ou aussi cr√©er les sch√©mas OpenApi ensemble.

## Why API Contracts matters

> Conf√©rence pr√©sent√©e par St√©ve Sfartz (Principal Architect - Cisco)

Cette pr√©sentation par le Principal Architect de Cisco nous explique pourquoi, dans une strat√©gie API First, le besoin d'avoir des contrats ainsi qu'un cycle de vie de l'API est primordial pour la coh√©rence du syst√®me.

Ils formalisent leur contrats d'API via OpenAPI Sp√©cification, un standard pour les contrats d'API REST, en compl√©ment de documents OpenAPI, pour former la d√©finition de l'API. A c√¥t√© de cette d√©finition, on trouve la gestion du cycle de vie (lifecycle) de l'API, pour informer des deprecated, du changelog et des Breaking Changes lors des versions majeures (semantic versionning).

![Definition and Lifecycle for an API](/images/posts/api-days-paris-2023/api-contract-definition-and-lifecycle.png)

Lors de la mise en place de ces contrats pour les API √† cisco, une qualit√© (qu'ils appellent aussi Health Contract) y a √©t√© associ√©e pour avoir une vue d'ensemble de la documentation des API. Ayant environ 2000 API, cette qualit√© ne peut pas √™tre √©valu√©e √† la main au cas par cas, et passe donc par des outils d'analyse tels qu'un linter Spectral, pour √©viter les erreurs et automatiser la g√©n√©ration de ce statut.

![API Contract Quality](/images/posts/api-days-paris-2023/api-contract-quality.png)

Vient ensuite la gestion du drift entre la documentation et le code (par exemple si une annotation est oubli√©e, une route non document√©e) : la v√©rification du drift doit √™tre faite lors de la CI/CD.

La conf√©rence se conclut sur une question simple : "Quelle est la source de v√©rit√© pour vos API ?". La r√©ponse est bien √©videmment le code, mais une documentation g√©n√©r√©e automatiquement permet justement de s'en rapprocher grandement. A Bedrock, nos API GraphQL ont leur documentation (sch√©ma) g√©n√©r√© automatiquement √† partir du code lors du merge d'une PR, ce qui permet d'√©viter les oublis de mise √† jour.

## Let's bring science into API docs

> Conf√©rence pr√©sent√©e par Lana Novikova (Technical Writer - JetBrains)

Au cours de cette conf√©rence, Lana Novikova explore comment fusionner les principes scientifiques avec une communication technique efficace dans la documentation des API. 
Elle partage √©galement ses connaissances sur la fa√ßon dont les d√©veloppeurs et d√©veloppeuses consomment l'information en ligne, en mettant en lumi√®re les liens avec diff√©rents styles cognitifs, le tout appuy√© par des articles scientifiques. Elle explique de mani√®re concr√®te comment ces principes peuvent √™tre appliqu√©s dans la documentation des API et comment ils peuvent contribuer √† am√©liorer l'exp√©rience des d√©veloppeurs et d√©veloppeuses.
[Sa conf√©rence est une extension d'un pr√©c√©dent talk qu'elle a donn√© en 2022 √† la "Write The Docs Australia"](https://www.youtube.com/watch?v=9SdGWU867bs)

La premi√®re √©tude que nous pr√©sente Lana s'intitule ["Patterns of Knowledge in API Reference Documentation"](https://www.cs.mcgill.ca/~martin/papers/tse2013a.pdf). 
Elle parle de la nature et de l'organisation des connaissances contenues dans la documentation de r√©f√©rence de centaines d'API au sein de deux plateformes technologiques : Java SDK 6 et .NET 4.0. L'√©tude a, entre autres, consist√© √† √©laborer une taxonomie des types de connaissances et a pu dresser la liste de 12 types de connaissances distinctes dans la documentation de l'API :

![Taxonomy of Knowledge Types](/images/posts/api-days-paris-2023/taxonomy-of-knowledge-types.png)

√Ä travers cette √©tude, nous pouvons donc √©valuer le contenu de la documentation de notre API en fonction des types de connaissances et ainsi d√©velopper des mod√®les de documentation adapt√©s aux connaissances commun√©ment associ√©es aux diff√©rents types de composants de l'api. De plus, aujourd'hui, des projets comme [the good docs project](https://thegooddocsproject.dev/) existent et proposent des templates de documentation bas√©s sur ces donn√©es scientifiques.

La deuxi√®me √©tude expos√©e dans cette conf√©rence a comme titre ["How Developers Use API Documentation: An Observation Study"](http://sigdoc.acm.org/wp-content/uploads/2019/01/CDQ18002_Meng_Steinhardt_Schubert.pdf). Sa m√©thodologie consiste √† l'observation active, via des screencasts et des protocoles verbaux, des activit√©s des personnes participantes pendant le test. Les chercheurs et chercheuses ont √©valu√© le taux de r√©ussite, le temps pass√© sur les t√¢ches et l'utilisation de la documentation et des cat√©gories de contenu. L'objectif principal est d'observer comment les d√©veloppeurs et d√©veloppeuses abordent les t√¢ches avec une API qu'elles ne connaissent pas. Il s'agit √©galement d'analyser comment les d√©veloppeurs et d√©veloppeuses utilisent les ressources d'information propos√©es par la documentation de l'API. Cela permet de caract√©riser les strat√©gies adopt√©es par les d√©veloppeurs et d√©veloppeuses lorsqu'elles commencent √† travailler avec une nouvelle API. La conclusion que Lana nous partage est qu'en moyenne, les personnes participantes ont utilis√© la documentation de l'API environ 49 % du temps (Min : 31 %, Max : 68 %). La cat√©gorie de contenu √† laquelle il est fait r√©f√©rence le plus souvent est "API reference", suivie de "Recipes page".

![Content categories of the API documentation used for the test](/images/posts/api-days-paris-2023/content-categories-of-the-api-documentation.png)

![Proportion of time spent on individual content categories](/images/posts/api-days-paris-2023/proportion-of-time-spent-on-individual-content-categories.png)

Il se d√©gage que le temps que les personnes participantes consacrent aux diff√©rentes cat√©gories de contenu varie consid√©rablement d'une personne √† l'autre. Sur la base de ces donn√©es, les chercheurs et chercheuses ont d√©fini trois types de personnages de d√©veloppeurs logiciels √† la recherche d'informations ainsi que leurs approches lorsqu'ils op√®rent celles-ci: Systematic learners, Opportunistic learners et Pragmatic learners. Pour les personnes curieuses d'approfondir le sujet, ces personae sont bas√©s sur une autre √©tude intitul√©e ["What is an end user software engineer?"](https://www.researchgate.net/publication/30815675_What_is_an_End_User_Software_Engineer).

Lana Novikova conclut en mettant l'accent sur le fait qu'il faut respecter les diff√©rentes strat√©gies adopt√©es par les d√©veloppeurs et les d√©veloppeuses lorsqu'elles abordent une nouvelle API et nous propose d'appliquer ces conseils :
- Pour les "opportunistic learners", donner des exemples de code complets et exhaustifs en donnant la possibilit√© de masquer tout le reste et de relier le texte au code.
- Pour les "systematic learners", fournir des informations importantes de mani√®re redondante et donner des connaissances de base pertinentes.
- Pour les "pragmatic learners" (et les autres), donner un moyen technique pour commencer √† utiliser une API.

Je tiens personnellement √† souligner qu'il est rare d'assister √† une conf√©rence aussi compl√®te se basant sur autant de donn√©es scientifiques. Je ressors de cette conf√©rence agr√©ablement surpris de la qualit√© de tout ce qui a √©t√© propos√© et des ressources mises √† disposition. Je vous laisse avec [un lien contenant toutes les slides de la pr√©sentation de Lana Novikova](https://speakerdeck.com/lananovikova10/lets-bring-science-into-api-docs-c9bd5a57-df28-4fa3-9388-d2d9d9a044bd) qui expliquera bien mieux le propos que mon r√©sum√©. Bravo √† elle et √† son travail, en esp√©rant voir de plus en plus de conf√©rences de ce genre √† l'avenir.

## Le mot de la fin

Si on vous a donn√© envie d'en savoir plus :
- le [site officiel de la conf√©rence](https://www.apidays.global/paris/)
- la majorit√© des [talks sont disponibles sur Youtube](https://www.youtube.com/watch?v=NdlhxIVlSEM&list=PLmEaqnTJ40OryW56Qo3c-C7hXcaR89xii)
- certains speakers ont mis √† disposition [les slides de leur talk](https://fr.slideshare.net/APIdays_official/presentations)

Bonnes f√™tes de fin d'ann√©e !

![Team API Days Paris 2023](/images/posts/api-days-paris-2023/team.jpg)

