<!DOCTYPE html>
<!--
    Type on Strap jekyll theme v2.4.0
    Theme free for personal and commercial use under the MIT license
    https://github.com/sylhare/Type-on-Strap/blob/master/LICENSE
-->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=0.5, maximum-scale=5">

    <!-- Theme Mode-->
    
    <script>
        const isAutoTheme = true;
        document.documentElement.setAttribute('data-theme', sessionStorage.getItem('theme'))
    </script>
    

    <!-- Main JS (navbar.js, katex_init.js and masonry_init.js)-->
    <script defer src="/assets/js/main.min.js"></script>

    <!-- CSS -->
    <link rel="stylesheet" href="/assets/css/main.css">

    <!--Favicon-->
    <link rel="shortcut icon" href="/assets/favicon.png" type="image/x-icon">

    

    <!-- KaTeX 0.15.2 -->
    
    <script defer src="/assets/js/vendor/katex.min.js"></script>
    <script defer src="/assets/js/vendor/auto-render.min.js" onload="renderMathInElement(document.body);"></script>
    

    <!-- Mermaid 8.13.10 -->
    
    <script defer src="/assets/js/vendor/mermaid.min.js" onload="mermaid.initialize({startOnLoad:true});"></script>
    

    <!-- Simple Jekyll Search 1.9.1 -->
    <script src="/assets/js/vendor/simple-jekyll-search.min.js" type="text/javascript"></script>

    <!-- Google Analytics / Cookie Consent -->
    <script>
      const cookieName = 'cookie-notice-dismissed-https://tech.bedrockstreaming.com';
      const isCookieConsent = 'false';
      const analyticsName = '';
    </script>

    
    

    <!-- seo tags -->
    <meta property="og:image" content="https://tech.bedrockstreaming.com/images/banner_xl.jpg">
    
    <meta property="og:type" content="website" />
    
    <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Performances web et “Disaster case” sur applications mobile native | Bedrock Tech Blog</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="Performances web et “Disaster case” sur applications mobile native" />
<meta name="author" content="Kenny Dits" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Blog technique de Bedrock" />
<meta property="og:description" content="Blog technique de Bedrock" />
<link rel="canonical" href="https://tech.bedrockstreaming.com/performances-web-disaster-case-applications-mobile-native" />
<meta property="og:url" content="https://tech.bedrockstreaming.com/performances-web-disaster-case-applications-mobile-native" />
<meta property="og:site_name" content="Bedrock Tech Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2013-07-02T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Performances web et “Disaster case” sur applications mobile native" />
<script type="application/ld+json">
{"mainEntityOfPage":{"@type":"WebPage","@id":"https://tech.bedrockstreaming.com/performances-web-disaster-case-applications-mobile-native"},"url":"https://tech.bedrockstreaming.com/performances-web-disaster-case-applications-mobile-native","author":{"@type":"Person","name":"Kenny Dits"},"@type":"BlogPosting","headline":"Performances web et “Disaster case” sur applications mobile native","dateModified":"2013-07-02T00:00:00+00:00","datePublished":"2013-07-02T00:00:00+00:00","description":"Blog technique de Bedrock","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <!-- RSS -->
    <link rel="alternate" type="application/atom+xml" title="Bedrock Tech Blog" href="https://tech.bedrockstreaming.com/feed.xml"/>
    <link type="application/atom+xml" rel="alternate" href="https://tech.bedrockstreaming.com/feed.xml" title="Bedrock Tech Blog" />

    <!-- Twitter Cards -->
    <meta name="twitter:title" content="Performances web et "Disaster case" sur applications mobile native">
    <meta name="twitter:description" content="La performance Web (ou grossièrement temps de chargement) est devenue aujourd’hui une problématique majeure dans tout développement Web.Les outils pour mesur...">
    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:image" content="https://tech.bedrockstreaming.com/images/banner_xl.jpg">
    <meta name="twitter:image:alt" content="Performances web et "Disaster case" sur applications mobile native">
</head>

  <body>
    <header class="site-header">

    <!-- Logo and title -->
	<div class="branding">
        
		<a href="/">
			<img alt="logo img" class="avatar" src="/images/br-site-logo.jpg" />
		</a>
        
        <a class="site-title" aria-label="Bedrock Tech Blog" href="/">
        Bedrock Tech Blog
		</a>
	</div>

    <!-- Toggle menu -->
    <nav class="clear">
    <a aria-label="pull" id="pull" class="toggle" href="#">
    <i class="fas fa-bars fa-lg"></i>
    </a>

    <!-- Menu -->
    <ul class="hide">
        

        
            
            
        
            
            <li class="separator"> | </li>
            <li>
                <a class="clear" aria-label="About" title="About" href="/about/">
                     About 
                </a>
            </li>
            
            
        
            
            
        
            
            <li class="separator"> | </li>
            <li>
                <a class="clear" aria-label="Jobs" title="Jobs" href="/jobs/">
                     Jobs 
                </a>
            </li>
            
            
        
            
            <li class="separator"> | </li>
            <li>
                <a class="clear" aria-label="Last Friday Talks" title="Last Friday Talks" href="/lft/">
                     Last Friday Talks 
                </a>
            </li>
            
            
        
            
            
        
            
            <li class="separator"> | </li>
            <li>
                <a class="clear" aria-label="Meetups & Conferences" title="Meetups & Conferences" href="/meetups/">
                     Meetups & Conferences 
                </a>
            </li>
            
            
        
            
            <li class="separator"> | </li>
            <li>
                <a class="clear" aria-label="OSS" title="OSS" href="/oss/">
                     OSS 
                </a>
            </li>
            
            
        
            
            
        
            
            <li class="separator"> | </li>
            <li>
                <a class="clear" aria-label="Search" title="Search" href="/search/">
                     <i class="fas fa-search" aria-hidden="true"></i>
                    
                </a>
            </li>
            
            
        
            
            <li class="separator"> | </li>
            <li>
                <a class="clear" aria-label="Tags" title="Tags" href="/tags/">
                     <i class="fas fa-tags" aria-hidden="true"></i>
                    
                </a>
            </li>
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
        
        
        <li class="separator"> | </li>
        <li><a id="theme-toggle" title="Performances web et "Disaster case" sur applications mobile native " aria-label="Performances web et "Disaster case" sur applications mobile native" onclick="themeToggle()"></a></li>
        
    </ul>

	</nav>
</header>

    <div class="content">
      <article >
  <header id="main" style="">
    <div class="title-padder">
      
      <h1 id="Performances+web+et+%22Disaster+case%22+sur+applications+mobile+native" class="title">Performances web et "Disaster case" sur applications mobile native</h1>
      


<div class="post-info"><a href="https://twitter.com/kenny_dee" target="_blank" rel="noopener">
      <img alt="Author's avatar" src="/images/avatar/kenny.jpg">
    
    <p class="meta">
      Kenny Dits - 
      
      July 02, 2013
    </p></a></div>

      
    </div>
  </header>

  <section class="post-content">
  
      <p>La performance Web (ou grossièrement temps de chargement) est devenue aujourd’hui une problématique majeure dans tout développement Web.</p>

<p>Les outils pour mesurer / comprendre sont plutôt reconnus désormais et arrivent a une certaine maturité. Il y a toutefois encore un créneau plutôt peu documenté (à mon goût) dans le domaine, celui permettant de mesurer les temps de chargement dans des applications mobiles natives (Android / iOs …)</p>

<p>Voici un retour des méthodes que nous utilisons pour mesurer les performances (notamment de chargement) de nos applications natives et générer des Waterfall Charts, mais aussi sur la mise en place de tests “disaster case” en cas d’indisponibilité de services utilisés par l’application.</p>

<p>Pour les besoins de ce tutoriel, nous allons prendre comme configuration, un Mac, avec une application native sur un iPhone 4 (relié au même réseau Wi-Fi que le Mac), ainsi que la version d’essai du logiciel CharlesProxy installé. (Mais la configuration et procédure est la même sur un autre OS, ou un autre mobile, et fonctionne aussi pour tester des webapps ou sites mobiles)</p>

<h3 id="charlesproxy">CharlesProxy</h3>

<p>Nous allons donc utiliser le logiciel payant <a href="https://www.charlesproxy.com/">CharlesProxy</a>, qui est un proxy HTTP ou Reverse Proxy permettant de capturer le traffic HTTP de son ordinateur. Il existe une version d’essai sans limite de 30 jours. Il y a peut être des alternatives libres, mais Charles étant plutôt une référence, c’est l’outil que nous utilisons.</p>

<p>Commencez donc par aller sur le site et installez CharlesProxy.</p>

<p>Une fois installé, lancez le, il devrait automatiquement commencer à capturer le trafic réseau.</p>

<h3 id="connexion-wi-fi-et-récupération-ip">Connexion Wi-Fi et récupération IP</h3>

<p>La deuxième étape consiste à connecter votre Ordinateur et votre Téléphone sur le même réseau Wi-Fi.</p>

<p>Récupérons ensuite notre adresse Ip via les “Préférences Système”, section “Internet et sans fil” et icone “Réseau” sur votre configuration Wi-Fi :</p>

<p><img src="/images/posts/imgob/0-00-30-83-201306-ob_9f332944f7f96d84b86805a14041a546_recup-ip.png" alt="Performances web et &quot;Disaster case&quot; sur applications mobile native" /></p>

<h3 id="configuration-du-proxy-sur-son-iphone">Configuration du proxy sur son iPhone</h3>

<p>Passons ensuite sur le téléphone, dans vos préférences Wi-Fi.</p>

<p>Cliquez ensuite sur la flèche bleu à droite du nom de la connexion sur le paramétrage Wi-Fi de notre iPhone, et descendre tout en bas du paramétrage pour configurer manuellement notre proxy HTTP :</p>

<p>Configurez le proxy de cette connexion pour passer par le Proxy Charles, avec l’adresse IP récupérée plus haut, et le port par défaut de Charles 8888.</p>

<p>Une fois la connexion lancée avec le Proxy activé et Charles bien lancé sur votre Mac, une popup d’activation devrait apparaitre :</p>

<p><img src="/images/posts/imgob/0-00-30-83-201306-ob_5fdf154fbea7025d99bd2e09dcd8e6cb_autorisation-charles.png" alt="Performances web et &quot;Disaster case&quot; sur applications mobile native" /></p>

<p>Aller ensuite sur un site mobile via Safari pour vérifier que le trafic est bien capturé par votre Proxy.</p>

<p>A ce stade, tout est prêt pour commencer les mesures.</p>

<h3 id="prise-de-mesure-avec-charles">Prise de mesure avec Charles</h3>

<p>Pour prendre une mesure avec Charles, allez dans le menu “Proxy”, décochez le “MAC OS X Proxy” afin de ne pas parasiter vos mesures, et nettoyez l’écran de Charles pour commencer une “session” propre.</p>

<p><img src="/images/posts/imgob/0-00-30-83-201306-ob_689b14b9dc97e42b31a007ecfe7343f1_cleaner-charles.png" alt="Performances web et &quot;Disaster case&quot; sur applications mobile native" /></p>

<p>Vous n’avez ensuite plus qu’a lancer une application pour mesurer la liste des requêtes HTTP nécessaire à son démarrage.</p>

<p>Dans la partie Structure, un clic sur un domaine vous donnera plus d’infos (nombre de requête, et détails de chacune) …</p>

<p>Sélectionnez toutes les requêtes, puis cliquez sur “Chart” sur la droite, pour obtenir un premier Waterfall (made in Charles)</p>

<p><img src="/images/posts/imgob/0-00-30-83-201306-ob_a5ed4b66cceafe170170112a0c5bc5ae_recording-charles-chart.png" alt="Performances web et &quot;Disaster case&quot; sur applications mobile native" /></p>

<h3 id="génération-de-waterfall-plus-complet">Génération de Waterfall (plus complet)</h3>

<p>Toujours sous Charles, avec toutes les structures sélectionnées, Fichier / Export puis selectionner le format Http Archive (.har)</p>

<p>Nous allons ensuite utiliser l’outil harviewer, pour visualiser le waterfall sous une forme plus complète que dans Charles.</p>

<p>Rendez vous ici (avec Firefox, plutôt que Chrome dont le rendu est buggé sur cet outil) : <a href="https://www.softwareishard.com/har/viewer/">https://www.softwareishard.com/har/viewer/</a></p>

<p>Décochez la case “Validate data before processing?” pour être moins embêté par des problèmes de compatibilité surement liés à l’export de Charles.</p>

<p><img src="/images/posts/imgob/0-00-30-83-201306-ob_1ca8d35846fcf94af13302079edba29d_harviewer.png" alt="Performances web et &quot;Disaster case&quot; sur applications mobile native" /></p>

<p>Ensuite, faites un Drag &amp; Drop de votre fichier .har dans le textarea de HarViewer pour obtenir votre waterfall, très proche de l’onglet Réseau de Firebug ou Network de la console de Chrome.</p>

<p>Vous retrouvez donc pour chaque requête tous les élements classique, avec détail des réponses, code HTTP de retour, taille etc, et le tout sur une timeline très précise.</p>

<p><img src="/images/posts/imgob/0-00-30-83-201306-ob_592bf871e7372f057e87d3bad159ca0d_waterfall-har-viewer.png" alt="Performances web et &quot;Disaster case&quot; sur applications mobile native" /></p>

<h3 id="throttling">Throttling</h3>

<p>Pour le moment, nous avons donc testé notre application sur notre connexion Wi-Fi, cas plutôt idéal. Mais comment simuler une connexion 3g par exemple, peut être plus proche de la réalité des utilisateurs de l’applications ?</p>

<p>Pour cela, il vous suffit d’aller dans Charles, puis le menu “Proxy” et “Throttle Settings”.</p>

<p>La latence par défaut configurée est un peu élevée (600ms), mais vous pouvez la modifier et affiner vos tests pour se rapprocher de conditions plus réelles.</p>

<p>Ensuite, toujours dans le menu “Proxy”, activé l’option “Throttle” et vous pourrez tester sur une connexion différente.</p>

<p><img src="/images/posts/imgob/0-00-30-83-201306-ob_e2de8973ef740d2832a1e475cc632226_throttling.png" alt="Performances web et &quot;Disaster case&quot; sur applications mobile native" /></p>

<h3 id="disaster-case-">Disaster Case ?</h3>

<p>Comment savoir comment se comporte votre application si vos Webservices sont injoignables ? ou si l’un des services tiers que vous utilisez est down ? Comment trouver les <a href="https://blog.patrickmeenan.com/2011/10/testing-for-frontend-spof.html">SPOF</a> (Single Point Of Failure) de vos apps ?</p>

<p>Toujours dans Charles, Allez dans “Tools”, puis “Map Remote”.</p>

<p>Ici, vous allez pouvoir rediriger les domaines de vos choix, vers un domaine de type Blackhole.</p>

<p>C’est à dire que le domaine choisi réagira comme si votre serveur web était dans un état de mort cérébrale ! Pas celui où il rejette la connexion immédiatement (trop facile), celui où il végète sans arriver à acquitter la réponse (le fameux “en attente de https:// ….”)</p>

<p>Pour ce besoin, nous allons utiliser le Blackhole fourni par <a href="https://twitter.com/patmeenan">Patrick Meenan</a> pour l’outil de mesure de performance web : <a href="https://www.webpagetest.org">WebPageTest</a> : https://blackhole.webpagetest.org</p>

<p><img src="/images/posts/imgob/0-00-30-83-201307-ob_f21590aa8b7234c9f7bc596f31f3d6d3_mapremote.png" alt="Performances web et &quot;Disaster case&quot; sur applications mobile native" /></p>

<p>Vous pouvez ensuite jouer avec les domaines, et regarder comment se comporte votre application dans le cas où l’un d’entre eux est inaccessible.</p>

<p>Sur notre iPhone 4 de test, on remarque d’ailleurs un timeout sur les requêtes de 75 secondes ! Imaginez le cas, où le développement et l’appel à ce service est synchrone ? 75 secondes de loading dans votre application avant de passer aux requêtes suivantes …</p>

<p><img src="/images/posts/imgob/0-00-30-83-201307-ob_08a2d492e28867e560b7a8863c328022_spof.png" alt="Performances web et &quot;Disaster case&quot; sur applications mobile native" /></p>

<p>Voilà, vous avez désormais une solution vous permettant de générer des Waterfall Charts pour vos apps natives, et de tester des conditions de mauvaises connexions, ou d’indisponibilité de service.</p>

<p>Si vous avez d’autres méthodes, plus simples ou plus complètes, ou tout autre remarque sur cette article, n’hésitez pas à le faire dans les commentaires ci-dessous.</p>

<p>Merci.</p>

<p>P.s: pour complément, n’hésitez pas à creuser le blogpost de Steve Souders sur les waterfall mobile, qui utilise une méthode très différente avec tcpdump et pcapperf <a href="https://www.stevesouders.com/blog/2013/03/26/mobile-waterfalls/">https://www.stevesouders.com/blog/2013/03/26/mobile-waterfalls/</a></p>


    
  </section>

  <!-- Social media shares -->
  

<div class="share-buttons">
    <ul class="share-buttons">
        <li class="meta">Share</li>
         
        <li>
            <a href="https://twitter.com/intent/tweet?text=Performances+web+et+%22Disaster+case%22+sur+applications+mobile+native%20https%3A%2F%2Ftech.bedrockstreaming.com%2Fperformances-web-disaster-case-applications-mobile-native"
               target="_blank" title="">
                <i class="fab fa-twitter-square fa-2x" aria-hidden="true"></i>
                <span class="sr-only">Tweet</span>
            </a>
        </li>
             
        <li>
            <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://tech.bedrockstreaming.com/performances-web-disaster-case-applications-mobile-native&title=Performances+web+et+%22Disaster+case%22+sur+applications+mobile+native%20%7C%20Bedrock+Tech+Blog&summary=&source=https://tech.bedrockstreaming.com/performances-web-disaster-case-applications-mobile-native"
               target="_blank" title=" LinkedIn">
                <i class="fab fa-linkedin fa-2x" aria-hidden="true"></i>
                <span class="sr-only">Share on LinkedIn</span>
            </a>
        </li>
          
        <li>
            <a href="mailto:?subject=Performances web et "Disaster case" sur applications mobile native%20%7C%20Bedrock Tech Blog&body=https://tech.bedrockstreaming.com/performances-web-disaster-case-applications-mobile-native"
               target="_blank" title="">
                <i class="fas fa-envelope-square fa-2x" aria-hidden="true"></i>
                <span class="sr-only">Email</span></a>
        </li>
        
    </ul>
</div>




   <!-- Tag list -->
  
  


  <div class="tag-list">
    <ul>
      
        <li class="meta">Tags</li>
      

      
        <li><a class="button" href="/tags/#mobile">
          <p><i class="fas fa-tag fa-fw fa-sm"></i> mobile</p>
        </a></li>
      
        <li><a class="button" href="/tags/#webperf">
          <p><i class="fas fa-tag fa-fw fa-sm"></i> webperf</p>
        </a></li>
      
    </ul>
  </div>



</article>

<!-- Post navigation -->

<div id="post-nav">
    
    <div id="previous-post">
        <a alt="Benchmarking WebSockets avec NodeJs" href="/benchmarking-websockets-avec-nodejs">
            <p>Previous post</p>
            Benchmarking WebSockets avec NodeJs
        </a>
    </div>
    

    
    <div id="next-post">
        <a alt="Coke, pour bien sniffer son code" href="/coke-pour-bien-sniffer-son-code">
            <p>Next post</p>
            Coke, pour bien sniffer son code
        </a>
    </div>
    
</div>



<!--Utterances-->


<!-- Cusdis -->


<!-- Disqus -->


<!-- To change color of links in the page -->
<style>
  header#main {
      background-size: cover;
      background-repeat: no-repeat;
      background-position: center;
  }

  

  
</style>

    </div>
    <footer class="site-footer">
    <p class="text">
        Powered by <a href="https://jekyllrb.com/">Jekyll</a> with <a href="https://github.com/sylhare/Type-on-Strap">Type on Strap</a>
</p>
            <div class="footer-icons">
                <ul>
                <!-- Social icons from Font Awesome, if enabled -->
                
<li>
    <a feed.xml href="/feed.xml"
       title="Follow RSS feed"
       target="_blank">
        <span class="fa-stack fa-lg">
            <i class="fas fa-circle fa-stack-2x"></i>
            <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
        </span>
    </a>
</li>



    

    

    

    

    

    

    
        
        
        
        
        <li>
            <a href="https://github.com/BedrockStreaming"
               title="Follow on Github"
               target="_blank"
               rel="noopener">
            <span class="fa-stack fa-lg">
              <i class="fas fa-circle fa-stack-2x"></i>
              <i class="fab fa-github fa-stack-1x fa-inverse"></i>
            </span>
            </a>
        </li>
    

    

    

    

    

    

    
        
        
        
        
        <li>
            <a href="https://www.linkedin.com/company/bedrock-streaming"
               title="Follow on Linkedin"
               target="_blank"
               rel="noopener">
            <span class="fa-stack fa-lg">
              <i class="fas fa-circle fa-stack-2x"></i>
              <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
            </span>
            </a>
        </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
        
        
        
        
        <li>
            <a href="https://twitter.com/Bedrock_Tech"
               title="Follow on Twitter"
               target="_blank"
               rel="noopener">
            <span class="fa-stack fa-lg">
              <i class="fas fa-circle fa-stack-2x"></i>
              <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
            </span>
            </a>
        </li>
    

    

    

    

    


                </ul>
            </div>
</footer>



  </body>
</html>
