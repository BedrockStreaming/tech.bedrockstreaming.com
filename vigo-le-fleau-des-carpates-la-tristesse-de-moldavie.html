<!DOCTYPE html>
<!--
    Type on Strap jekyll theme v2.4.0
    Theme free for personal and commercial use under the MIT license
    https://github.com/sylhare/Type-on-Strap/blob/master/LICENSE
-->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=0.5, maximum-scale=5">

    <!-- Theme Mode-->
    
    <script>
        const isAutoTheme = true;
        document.documentElement.setAttribute('data-theme', sessionStorage.getItem('theme'))
    </script>
    

    <!-- Main JS (navbar.js, katex_init.js and masonry_init.js)-->
    <script defer src="/assets/js/main.min.js"></script>

    <!-- CSS -->
    <link rel="stylesheet" href="/assets/css/main.css">

    <!--Favicon-->
    <link rel="shortcut icon" href="/assets/favicon.png" type="image/x-icon">

    

    <!-- KaTeX 0.15.2 -->
    
    <script defer src="/assets/js/vendor/katex.min.js"></script>
    <script defer src="/assets/js/vendor/auto-render.min.js" onload="renderMathInElement(document.body);"></script>
    

    <!-- Mermaid 8.13.10 -->
    
    <script defer src="/assets/js/vendor/mermaid.min.js" onload="mermaid.initialize({startOnLoad:true});"></script>
    

    <!-- Simple Jekyll Search 1.9.1 -->
    <script src="/assets/js/vendor/simple-jekyll-search.min.js" type="text/javascript"></script>

    <!-- Google Analytics / Cookie Consent -->
    <script>
      const cookieName = 'cookie-notice-dismissed-https://tech.bedrockstreaming.com';
      const isCookieConsent = 'false';
      const analyticsName = '';
    </script>

    
    

    <!-- seo tags -->
    <meta property="og:image" content="https://tech.bedrockstreaming.com/images/posts/cytron/vigo.jpg">
    
    <meta property="og:type" content="website" />
    
    <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Vigo, le fléau des Carpates | Bedrock Tech Blog</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="Vigo, le fléau des Carpates" />
<meta name="author" content="Cytron Team" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Blog technique de Bedrock" />
<meta property="og:description" content="Blog technique de Bedrock" />
<link rel="canonical" href="https://tech.bedrockstreaming.com/vigo-le-fleau-des-carpates-la-tristesse-de-moldavie" />
<meta property="og:url" content="https://tech.bedrockstreaming.com/vigo-le-fleau-des-carpates-la-tristesse-de-moldavie" />
<meta property="og:site_name" content="Bedrock Tech Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2013-08-13T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Vigo, le fléau des Carpates" />
<script type="application/ld+json">
{"mainEntityOfPage":{"@type":"WebPage","@id":"https://tech.bedrockstreaming.com/vigo-le-fleau-des-carpates-la-tristesse-de-moldavie"},"url":"https://tech.bedrockstreaming.com/vigo-le-fleau-des-carpates-la-tristesse-de-moldavie","author":{"@type":"Person","name":"Cytron Team"},"@type":"BlogPosting","headline":"Vigo, le fléau des Carpates","dateModified":"2013-08-13T00:00:00+00:00","datePublished":"2013-08-13T00:00:00+00:00","description":"Blog technique de Bedrock","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <!-- RSS -->
    <link rel="alternate" type="application/atom+xml" title="Bedrock Tech Blog" href="https://tech.bedrockstreaming.com/feed.xml"/>
    <link type="application/atom+xml" rel="alternate" href="https://tech.bedrockstreaming.com/feed.xml" title="Bedrock Tech Blog" />

    <!-- Twitter Cards -->
    <meta name="twitter:title" content="Vigo, le fléau des Carpates">
    <meta name="twitter:description" content="CasperJS permet d’écrire des scripts javascript qui vont automatiser des tests fonctionnels de pages web. Il exécute ces tests dans une instance de PhantomJS...">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://tech.bedrockstreaming.com/images/posts/cytron/vigo.jpg">
    <meta name="twitter:image:alt" content="Vigo, le fléau des Carpates">
</head>

  <body>
    <header class="site-header">

    <!-- Logo and title -->
	<div class="branding">
        
		<a href="/">
			<img alt="logo img" class="avatar" src="/images/br-site-logo.jpg" />
		</a>
        
        <a class="site-title" aria-label="Bedrock Tech Blog" href="/">
        Bedrock Tech Blog
		</a>
	</div>

    <!-- Toggle menu -->
    <nav class="clear">
    <a aria-label="pull" id="pull" class="toggle" href="#">
    <i class="fas fa-bars fa-lg"></i>
    </a>

    <!-- Menu -->
    <ul class="hide">
        

        
            
            
        
            
            <li class="separator"> | </li>
            <li>
                <a class="clear" aria-label="About" title="About" href="/about/">
                     About 
                </a>
            </li>
            
            
        
            
            
        
            
            <li class="separator"> | </li>
            <li>
                <a class="clear" aria-label="Jobs" title="Jobs" href="/jobs/">
                     Jobs 
                </a>
            </li>
            
            
        
            
            <li class="separator"> | </li>
            <li>
                <a class="clear" aria-label="Last Friday Talks" title="Last Friday Talks" href="/lft/">
                     Last Friday Talks 
                </a>
            </li>
            
            
        
            
            
        
            
            <li class="separator"> | </li>
            <li>
                <a class="clear" aria-label="Meetups & Conferences" title="Meetups & Conferences" href="/meetups/">
                     Meetups & Conferences 
                </a>
            </li>
            
            
        
            
            <li class="separator"> | </li>
            <li>
                <a class="clear" aria-label="OSS" title="OSS" href="/oss/">
                     OSS 
                </a>
            </li>
            
            
        
            
            
        
            
            <li class="separator"> | </li>
            <li>
                <a class="clear" aria-label="Search" title="Search" href="/search/">
                     <i class="fas fa-search" aria-hidden="true"></i>
                    
                </a>
            </li>
            
            
        
            
            <li class="separator"> | </li>
            <li>
                <a class="clear" aria-label="Tags" title="Tags" href="/tags/">
                     <i class="fas fa-tags" aria-hidden="true"></i>
                    
                </a>
            </li>
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
        
        
        <li class="separator"> | </li>
        <li><a id="theme-toggle" title="Vigo, le fléau des Carpates " aria-label="Vigo, le fléau des Carpates" onclick="themeToggle()"></a></li>
        
    </ul>

	</nav>
</header>

    <div class="content">
      <article class="feature-image" >
  <header id="main" style="">
    <div class="title-padder">
      
      <h1 id="Vigo%2C+le+fl%C3%A9au+des+Carpates" class="title">Vigo, le fléau des Carpates</h1>
      


<div class="post-info">
      <img alt="Author's avatar" src="/images/avatar/cytron.png">
    
    <p class="meta">
      Cytron Team - 
      
      August 13, 2013
    </p></div>

      
    </div>
  </header>

  <section class="post-content">
  
      <p><a href="https://casperjs.org/">CasperJS</a> permet d’écrire des scripts javascript qui vont automatiser des tests fonctionnels de pages web. Il exécute ces tests dans une instance de <a href="https://phantomjs.org/">PhantomJS</a> qui est un navigateur scriptable et sans interface graphique (“Headless” dit-on dans le milieu).</p>

<p>Afin de mieux structurer nos tests, de faciliter leur écriture et de pouvoir les lancer avec une commande unique, nous avons créé <a href="https://github.com/BedrockStreaming/VigoJS">VigoJS</a>, une surcouche pour <a href="https://casperjs.org/">CasperJS</a>.</p>

<h4 id="fonctionnalités">Fonctionnalités</h4>

<p>Toutes les fonctionnalités de base de <a href="https://casperjs.org/">CasperJS</a> sont accessibles. Nous y avons simplement ajouté un mécanisme de configuration contenant plusieurs paramètres de base dont l’URL de test par défaut, l’authentification HTTP éventuelle ou encore la taille de l’écran virtuel. Il est également possible de spécifier des environnements (dev, preprod, prod…) pour différencier les comportements de certains tests. Ainsi, en fonction de l’environnement demandé dans la ligne de commande, les tests peuvent être joués sur des URL différentes avec la bonne authentification HTTP.</p>

<p>Quelques fonctions utilitaires sont aussi disponibles pour réaliser rapidement certaines vérifications récurrentes et ainsi faciliter le développement des tests. On peut, par exemple, rechercher aisément la présence d’erreurs ou warnings PHP dans une page. Il est aussi possible de faire un <em>retry</em> lorsqu’un test a échoué afin d’être certain que ce n’est pas une erreur du type “MySql server has gone away” qui peut se produire de temps en temps sur les serveurs de tests. Par ailleurs, quand un test échoue, <a href="https://github.com/BedrockStreaming/VigoJS">VigoJS</a> exporte une capture d’écran qui s’avère très pratique pour comprendre ce qu’il s’est passé !</p>

<p>Tous les paramètres ajoutés à la ligne de commande et dans la configuration sont injectés et accessibles dans la classe de test. On garde, de cette manière, une certaine flexibilité. Cela peut permettre, par exemple, de découper les tests avec de la pagination :</p>

<script src="https://gist.github.com/KuiKui/6121955.js"></script>

<script src="https://gist.github.com/fdubost/6172224.js"></script>

<h4 id="affichage-dans-le-terminal">Affichage dans le terminal</h4>

<p>Nous avons aussi amélioré l’affichage des résultats des tests. Il est ainsi possible de préciser pour chaque test : un titre et une description personnalisés afin de rendre les comptes-rendus plus compréhensible pour les utilisateurs. De même des commentaires utilisateurs peuvent être ajoutés plus simplement dans le déroulement des tests.</p>

<p><img src="/images/posts/imgob/0-00-30-83-201308-ob_a1e6705b03efdc2518ba5e18c284550a_vigo-console-5.png" alt="Affichage dans le terminal" /></p>

<h4 id="intégration-continue">Intégration continue</h4>

<p><a href="https://casperjs.org/">CasperJS</a> génère nativement des rapports xUnit. <a href="https://github.com/BedrockStreaming/VigoJS">VigoJS</a> intègre donc cette fonctionnalité pour être utilisé sur une plateforme d’intégration continue comme <a href="https://jenkins-ci.org/">Jenkins</a>. Il est aussi possible de modifier le paramètre <em>classPath</em> dans le fichier xUnit pour améliorer la lisibilité des résultats :</p>

<p><img src="/images/posts/imgob/0-00-30-83-201308-ob_5138f3_capture-d-e-cran-2013-08-01-a-15-57-02.png" alt="Affichage des résultats des tests dans Jenkins" /></p>

<p>Le chemin dans lequel est généré le rapport est configurable par l’option <em>–buildPath</em> (ou dans la configuration) :</p>

<script src="https://gist.github.com/KuiKui/6122091.js"></script>

<p>Il suffit ensuite de configurer le job Jenkins pour qu’il récupère le rapport de test dans ce dossier. Sans oublier de <a href="/lache-moi-la-branch">faire un job pour tester les Pull Requests</a> de votre projet.</p>

<p><a href="https://github.com/BedrockStreaming/VigoJS">VigoJS</a> est disponible en <a href="https://tom.preston-werner.com/2011/11/22/open-source-everything.html">open-source</a> sur <a href="https://github.com/BedrockStreaming">le compte GitHub de M6Web</a>.</p>

<p>Enjoy !</p>

    
  </section>

  <!-- Social media shares -->
  

<div class="share-buttons">
    <ul class="share-buttons">
        <li class="meta">Share</li>
         
        <li>
            <a href="https://twitter.com/intent/tweet?text=Vigo%2C+le+fl%C3%A9au+des+Carpates%20https%3A%2F%2Ftech.bedrockstreaming.com%2Fvigo-le-fleau-des-carpates-la-tristesse-de-moldavie"
               target="_blank" title="">
                <i class="fab fa-twitter-square fa-2x" aria-hidden="true"></i>
                <span class="sr-only">Tweet</span>
            </a>
        </li>
             
        <li>
            <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://tech.bedrockstreaming.com/vigo-le-fleau-des-carpates-la-tristesse-de-moldavie&title=Vigo%2C+le+fl%C3%A9au+des+Carpates%20%7C%20Bedrock+Tech+Blog&summary=&source=https://tech.bedrockstreaming.com/vigo-le-fleau-des-carpates-la-tristesse-de-moldavie"
               target="_blank" title=" LinkedIn">
                <i class="fab fa-linkedin fa-2x" aria-hidden="true"></i>
                <span class="sr-only">Share on LinkedIn</span>
            </a>
        </li>
          
        <li>
            <a href="mailto:?subject=Vigo, le fléau des Carpates%20%7C%20Bedrock Tech Blog&body=https://tech.bedrockstreaming.com/vigo-le-fleau-des-carpates-la-tristesse-de-moldavie"
               target="_blank" title="">
                <i class="fas fa-envelope-square fa-2x" aria-hidden="true"></i>
                <span class="sr-only">Email</span></a>
        </li>
        
    </ul>
</div>




   <!-- Tag list -->
  
  


  <div class="tag-list">
    <ul>
      
        <li class="meta">Tags</li>
      

      
        <li><a class="button" href="/tags/#javascript">
          <p><i class="fas fa-tag fa-fw fa-sm"></i> javascript</p>
        </a></li>
      
        <li><a class="button" href="/tags/#outil">
          <p><i class="fas fa-tag fa-fw fa-sm"></i> outil</p>
        </a></li>
      
        <li><a class="button" href="/tags/#qualite">
          <p><i class="fas fa-tag fa-fw fa-sm"></i> qualite</p>
        </a></li>
      
        <li><a class="button" href="/tags/#tests+fonctionnels">
          <p><i class="fas fa-tag fa-fw fa-sm"></i> tests fonctionnels</p>
        </a></li>
      
    </ul>
  </div>



</article>

<!-- Post navigation -->

<div id="post-nav">
    
    <div id="previous-post">
        <a alt="Le NoSQL, Focus sur MongoDB par Cédric Derue (Altran)" href="/le-nosql-focus-sur-mongodb-par-cedric-derue-altran">
            <p>Previous post</p>
            Le NoSQL, Focus sur MongoDB par Cédric Derue (Altran)
        </a>
    </div>
    

    
    <div id="next-post">
        <a alt="Introduction à la qualité logicielle avec Node.js" href="/introduction-qualite-logicielle-avec-node-js">
            <p>Next post</p>
            Introduction à la qualité logicielle avec Node.js
        </a>
    </div>
    
</div>



<!--Utterances-->


<!-- Cusdis -->


<!-- Disqus -->


<!-- To change color of links in the page -->
<style>
  header#main {
      background-size: cover;
      background-repeat: no-repeat;
      background-position: center;
  }

  

  
  header#main { background-image: url('/images/posts/cytron/vigo.jpg'); }
  
</style>

    </div>
    <footer class="site-footer">
    <p class="text">
        Powered by <a href="https://jekyllrb.com/">Jekyll</a> with <a href="https://github.com/sylhare/Type-on-Strap">Type on Strap</a>
</p>
            <div class="footer-icons">
                <ul>
                <!-- Social icons from Font Awesome, if enabled -->
                
<li>
    <a feed.xml href="/feed.xml"
       title="Follow RSS feed"
       target="_blank">
        <span class="fa-stack fa-lg">
            <i class="fas fa-circle fa-stack-2x"></i>
            <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
        </span>
    </a>
</li>



    

    

    

    

    

    

    
        
        
        
        
        <li>
            <a href="https://github.com/BedrockStreaming"
               title="Follow on Github"
               target="_blank"
               rel="noopener">
            <span class="fa-stack fa-lg">
              <i class="fas fa-circle fa-stack-2x"></i>
              <i class="fab fa-github fa-stack-1x fa-inverse"></i>
            </span>
            </a>
        </li>
    

    

    

    

    

    

    
        
        
        
        
        <li>
            <a href="https://www.linkedin.com/company/bedrock-streaming"
               title="Follow on Linkedin"
               target="_blank"
               rel="noopener">
            <span class="fa-stack fa-lg">
              <i class="fas fa-circle fa-stack-2x"></i>
              <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
            </span>
            </a>
        </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
        
        
        
        
        <li>
            <a href="https://twitter.com/Bedrock_Tech"
               title="Follow on Twitter"
               target="_blank"
               rel="noopener">
            <span class="fa-stack fa-lg">
              <i class="fas fa-circle fa-stack-2x"></i>
              <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
            </span>
            </a>
        </li>
    

    

    

    

    


                </ul>
            </div>
</footer>



  </body>
</html>
